{
"version":3,
"file":"module$node_modules$three$examples$jsm$loaders$GLTFLoader.js",
"lineCount":128,
"mappings":"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",
"sources":["node_modules/three/examples/jsm/loaders/GLTFLoader.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$three$examples$jsm$loaders$GLTFLoader\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GLTFLoader = void 0;\n\nvar _three = require(\"three\");\n\nvar _BufferGeometryUtils = require(\"../utils/BufferGeometryUtils.js\");\n\nclass GLTFLoader extends _three.Loader {\n  constructor(manager) {\n    super(manager);\n    this.dracoLoader = null;\n    this.ktx2Loader = null;\n    this.meshoptDecoder = null;\n    this.pluginCallbacks = [];\n    this.register(function (parser) {\n      return new GLTFMaterialsClearcoatExtension(parser);\n    });\n    this.register(function (parser) {\n      return new GLTFTextureBasisUExtension(parser);\n    });\n    this.register(function (parser) {\n      return new GLTFTextureWebPExtension(parser);\n    });\n    this.register(function (parser) {\n      return new GLTFTextureAVIFExtension(parser);\n    });\n    this.register(function (parser) {\n      return new GLTFMaterialsSheenExtension(parser);\n    });\n    this.register(function (parser) {\n      return new GLTFMaterialsTransmissionExtension(parser);\n    });\n    this.register(function (parser) {\n      return new GLTFMaterialsVolumeExtension(parser);\n    });\n    this.register(function (parser) {\n      return new GLTFMaterialsIorExtension(parser);\n    });\n    this.register(function (parser) {\n      return new GLTFMaterialsEmissiveStrengthExtension(parser);\n    });\n    this.register(function (parser) {\n      return new GLTFMaterialsSpecularExtension(parser);\n    });\n    this.register(function (parser) {\n      return new GLTFMaterialsIridescenceExtension(parser);\n    });\n    this.register(function (parser) {\n      return new GLTFLightsExtension(parser);\n    });\n    this.register(function (parser) {\n      return new GLTFMeshoptCompression(parser);\n    });\n    this.register(function (parser) {\n      return new GLTFMeshGpuInstancing(parser);\n    });\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const scope = this;\n    let resourcePath;\n\n    if (this.resourcePath !== '') {\n      resourcePath = this.resourcePath;\n    } else if (this.path !== '') {\n      resourcePath = this.path;\n    } else {\n      resourcePath = _three.LoaderUtils.extractUrlBase(url);\n    } // Tells the LoadingManager to track an extra item, which resolves after\n    // the model is fully loaded. This means the count of items loaded will\n    // be incorrect, but ensures manager.onLoad() does not fire early.\n\n\n    this.manager.itemStart(url);\n\n    const _onError = function (e) {\n      if (onError) {\n        onError(e);\n      } else {\n        console.error(e);\n      }\n\n      scope.manager.itemError(url);\n      scope.manager.itemEnd(url);\n    };\n\n    const loader = new _three.FileLoader(this.manager);\n    loader.setPath(this.path);\n    loader.setResponseType('arraybuffer');\n    loader.setRequestHeader(this.requestHeader);\n    loader.setWithCredentials(this.withCredentials);\n    loader.load(url, function (data) {\n      try {\n        scope.parse(data, resourcePath, function (gltf) {\n          onLoad(gltf);\n          scope.manager.itemEnd(url);\n        }, _onError);\n      } catch (e) {\n        _onError(e);\n      }\n    }, onProgress, _onError);\n  }\n\n  setDRACOLoader(dracoLoader) {\n    this.dracoLoader = dracoLoader;\n    return this;\n  }\n\n  setDDSLoader() {\n    throw new Error('THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".');\n  }\n\n  setKTX2Loader(ktx2Loader) {\n    this.ktx2Loader = ktx2Loader;\n    return this;\n  }\n\n  setMeshoptDecoder(meshoptDecoder) {\n    this.meshoptDecoder = meshoptDecoder;\n    return this;\n  }\n\n  register(callback) {\n    if (this.pluginCallbacks.indexOf(callback) === -1) {\n      this.pluginCallbacks.push(callback);\n    }\n\n    return this;\n  }\n\n  unregister(callback) {\n    if (this.pluginCallbacks.indexOf(callback) !== -1) {\n      this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(callback), 1);\n    }\n\n    return this;\n  }\n\n  parse(data, path, onLoad, onError) {\n    let json;\n    const extensions = {};\n    const plugins = {};\n    const textDecoder = new TextDecoder();\n\n    if (typeof data === 'string') {\n      json = JSON.parse(data);\n    } else if (data instanceof ArrayBuffer) {\n      const magic = textDecoder.decode(new Uint8Array(data, 0, 4));\n\n      if (magic === BINARY_EXTENSION_HEADER_MAGIC) {\n        try {\n          extensions[EXTENSIONS.KHR_BINARY_GLTF] = new GLTFBinaryExtension(data);\n        } catch (error) {\n          if (onError) onError(error);\n          return;\n        }\n\n        json = JSON.parse(extensions[EXTENSIONS.KHR_BINARY_GLTF].content);\n      } else {\n        json = JSON.parse(textDecoder.decode(data));\n      }\n    } else {\n      json = data;\n    }\n\n    if (json.asset === undefined || json.asset.version[0] < 2) {\n      if (onError) onError(new Error('THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.'));\n      return;\n    }\n\n    const parser = new GLTFParser(json, {\n      path: path || this.resourcePath || '',\n      crossOrigin: this.crossOrigin,\n      requestHeader: this.requestHeader,\n      manager: this.manager,\n      ktx2Loader: this.ktx2Loader,\n      meshoptDecoder: this.meshoptDecoder\n    });\n    parser.fileLoader.setRequestHeader(this.requestHeader);\n\n    for (let i = 0; i < this.pluginCallbacks.length; i++) {\n      const plugin = this.pluginCallbacks[i](parser);\n      plugins[plugin.name] = plugin; // Workaround to avoid determining as unknown extension\n      // in addUnknownExtensionsToUserData().\n      // Remove this workaround if we move all the existing\n      // extension handlers to plugin system\n\n      extensions[plugin.name] = true;\n    }\n\n    if (json.extensionsUsed) {\n      for (let i = 0; i < json.extensionsUsed.length; ++i) {\n        const extensionName = json.extensionsUsed[i];\n        const extensionsRequired = json.extensionsRequired || [];\n\n        switch (extensionName) {\n          case EXTENSIONS.KHR_MATERIALS_UNLIT:\n            extensions[extensionName] = new GLTFMaterialsUnlitExtension();\n            break;\n\n          case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n            extensions[extensionName] = new GLTFDracoMeshCompressionExtension(json, this.dracoLoader);\n            break;\n\n          case EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n            extensions[extensionName] = new GLTFTextureTransformExtension();\n            break;\n\n          case EXTENSIONS.KHR_MESH_QUANTIZATION:\n            extensions[extensionName] = new GLTFMeshQuantizationExtension();\n            break;\n\n          default:\n            if (extensionsRequired.indexOf(extensionName) >= 0 && plugins[extensionName] === undefined) {\n              console.warn('THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".');\n            }\n\n        }\n      }\n    }\n\n    parser.setExtensions(extensions);\n    parser.setPlugins(plugins);\n    parser.parse(onLoad, onError);\n  }\n\n  parseAsync(data, path) {\n    const scope = this;\n    return new Promise(function (resolve, reject) {\n      scope.parse(data, path, resolve, reject);\n    });\n  }\n\n}\n/* GLTFREGISTRY */\n\n\nexports.GLTFLoader = GLTFLoader;\n\nfunction GLTFRegistry() {\n  let objects = {};\n  return {\n    get: function (key) {\n      return objects[key];\n    },\n    add: function (key, object) {\n      objects[key] = object;\n    },\n    remove: function (key) {\n      delete objects[key];\n    },\n    removeAll: function () {\n      objects = {};\n    }\n  };\n}\n/*********************************/\n\n/********** EXTENSIONS ***********/\n\n/*********************************/\n\n\nconst EXTENSIONS = {\n  KHR_BINARY_GLTF: 'KHR_binary_glTF',\n  KHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n  KHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n  KHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n  KHR_MATERIALS_IOR: 'KHR_materials_ior',\n  KHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n  KHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n  KHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n  KHR_MATERIALS_IRIDESCENCE: 'KHR_materials_iridescence',\n  KHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n  KHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n  KHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n  KHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n  KHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n  KHR_MATERIALS_EMISSIVE_STRENGTH: 'KHR_materials_emissive_strength',\n  EXT_TEXTURE_WEBP: 'EXT_texture_webp',\n  EXT_TEXTURE_AVIF: 'EXT_texture_avif',\n  EXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression',\n  EXT_MESH_GPU_INSTANCING: 'EXT_mesh_gpu_instancing'\n};\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\n\nclass GLTFLightsExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL; // Object3D instance caches\n\n    this.cache = {\n      refs: {},\n      uses: {}\n    };\n  }\n\n  _markDefs() {\n    const parser = this.parser;\n    const nodeDefs = this.parser.json.nodes || [];\n\n    for (let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n      const nodeDef = nodeDefs[nodeIndex];\n\n      if (nodeDef.extensions && nodeDef.extensions[this.name] && nodeDef.extensions[this.name].light !== undefined) {\n        parser._addNodeRef(this.cache, nodeDef.extensions[this.name].light);\n      }\n    }\n  }\n\n  _loadLight(lightIndex) {\n    const parser = this.parser;\n    const cacheKey = 'light:' + lightIndex;\n    let dependency = parser.cache.get(cacheKey);\n    if (dependency) return dependency;\n    const json = parser.json;\n    const extensions = json.extensions && json.extensions[this.name] || {};\n    const lightDefs = extensions.lights || [];\n    const lightDef = lightDefs[lightIndex];\n    let lightNode;\n    const color = new _three.Color(0xffffff);\n    if (lightDef.color !== undefined) color.fromArray(lightDef.color);\n    const range = lightDef.range !== undefined ? lightDef.range : 0;\n\n    switch (lightDef.type) {\n      case 'directional':\n        lightNode = new _three.DirectionalLight(color);\n        lightNode.target.position.set(0, 0, -1);\n        lightNode.add(lightNode.target);\n        break;\n\n      case 'point':\n        lightNode = new _three.PointLight(color);\n        lightNode.distance = range;\n        break;\n\n      case 'spot':\n        lightNode = new _three.SpotLight(color);\n        lightNode.distance = range; // Handle spotlight properties.\n\n        lightDef.spot = lightDef.spot || {};\n        lightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n        lightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n        lightNode.angle = lightDef.spot.outerConeAngle;\n        lightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n        lightNode.target.position.set(0, 0, -1);\n        lightNode.add(lightNode.target);\n        break;\n\n      default:\n        throw new Error('THREE.GLTFLoader: Unexpected light type: ' + lightDef.type);\n    } // Some lights (e.g. spot) default to a position other than the origin. Reset the position\n    // here, because node-level parsing will only override position if explicitly specified.\n\n\n    lightNode.position.set(0, 0, 0);\n    lightNode.decay = 2;\n    assignExtrasToUserData(lightNode, lightDef);\n    if (lightDef.intensity !== undefined) lightNode.intensity = lightDef.intensity;\n    lightNode.name = parser.createUniqueName(lightDef.name || 'light_' + lightIndex);\n    dependency = Promise.resolve(lightNode);\n    parser.cache.add(cacheKey, dependency);\n    return dependency;\n  }\n\n  getDependency(type, index) {\n    if (type !== 'light') return;\n    return this._loadLight(index);\n  }\n\n  createNodeAttachment(nodeIndex) {\n    const self = this;\n    const parser = this.parser;\n    const json = parser.json;\n    const nodeDef = json.nodes[nodeIndex];\n    const lightDef = nodeDef.extensions && nodeDef.extensions[this.name] || {};\n    const lightIndex = lightDef.light;\n    if (lightIndex === undefined) return null;\n    return this._loadLight(lightIndex).then(function (light) {\n      return parser._getNodeRef(self.cache, lightIndex, light);\n    });\n  }\n\n}\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\n\n\nclass GLTFMaterialsUnlitExtension {\n  constructor() {\n    this.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n  }\n\n  getMaterialType() {\n    return _three.MeshBasicMaterial;\n  }\n\n  extendParams(materialParams, materialDef, parser) {\n    const pending = [];\n    materialParams.color = new _three.Color(1.0, 1.0, 1.0);\n    materialParams.opacity = 1.0;\n    const metallicRoughness = materialDef.pbrMetallicRoughness;\n\n    if (metallicRoughness) {\n      if (Array.isArray(metallicRoughness.baseColorFactor)) {\n        const array = metallicRoughness.baseColorFactor;\n        materialParams.color.fromArray(array);\n        materialParams.opacity = array[3];\n      }\n\n      if (metallicRoughness.baseColorTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture, _three.sRGBEncoding));\n      }\n    }\n\n    return Promise.all(pending);\n  }\n\n}\n/**\n * Materials Emissive Strength Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/blob/5768b3ce0ef32bc39cdf1bef10b948586635ead3/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md\n */\n\n\nclass GLTFMaterialsEmissiveStrengthExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH;\n  }\n\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n\n    const emissiveStrength = materialDef.extensions[this.name].emissiveStrength;\n\n    if (emissiveStrength !== undefined) {\n      materialParams.emissiveIntensity = emissiveStrength;\n    }\n\n    return Promise.resolve();\n  }\n\n}\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\n\n\nclass GLTFMaterialsClearcoatExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n  }\n\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n    return _three.MeshPhysicalMaterial;\n  }\n\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n\n    const pending = [];\n    const extension = materialDef.extensions[this.name];\n\n    if (extension.clearcoatFactor !== undefined) {\n      materialParams.clearcoat = extension.clearcoatFactor;\n    }\n\n    if (extension.clearcoatTexture !== undefined) {\n      pending.push(parser.assignTexture(materialParams, 'clearcoatMap', extension.clearcoatTexture));\n    }\n\n    if (extension.clearcoatRoughnessFactor !== undefined) {\n      materialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n    }\n\n    if (extension.clearcoatRoughnessTexture !== undefined) {\n      pending.push(parser.assignTexture(materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture));\n    }\n\n    if (extension.clearcoatNormalTexture !== undefined) {\n      pending.push(parser.assignTexture(materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture));\n\n      if (extension.clearcoatNormalTexture.scale !== undefined) {\n        const scale = extension.clearcoatNormalTexture.scale;\n        materialParams.clearcoatNormalScale = new _three.Vector2(scale, scale);\n      }\n    }\n\n    return Promise.all(pending);\n  }\n\n}\n/**\n * Iridescence Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_iridescence\n */\n\n\nclass GLTFMaterialsIridescenceExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_IRIDESCENCE;\n  }\n\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n    return _three.MeshPhysicalMaterial;\n  }\n\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n\n    const pending = [];\n    const extension = materialDef.extensions[this.name];\n\n    if (extension.iridescenceFactor !== undefined) {\n      materialParams.iridescence = extension.iridescenceFactor;\n    }\n\n    if (extension.iridescenceTexture !== undefined) {\n      pending.push(parser.assignTexture(materialParams, 'iridescenceMap', extension.iridescenceTexture));\n    }\n\n    if (extension.iridescenceIor !== undefined) {\n      materialParams.iridescenceIOR = extension.iridescenceIor;\n    }\n\n    if (materialParams.iridescenceThicknessRange === undefined) {\n      materialParams.iridescenceThicknessRange = [100, 400];\n    }\n\n    if (extension.iridescenceThicknessMinimum !== undefined) {\n      materialParams.iridescenceThicknessRange[0] = extension.iridescenceThicknessMinimum;\n    }\n\n    if (extension.iridescenceThicknessMaximum !== undefined) {\n      materialParams.iridescenceThicknessRange[1] = extension.iridescenceThicknessMaximum;\n    }\n\n    if (extension.iridescenceThicknessTexture !== undefined) {\n      pending.push(parser.assignTexture(materialParams, 'iridescenceThicknessMap', extension.iridescenceThicknessTexture));\n    }\n\n    return Promise.all(pending);\n  }\n\n}\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\n\n\nclass GLTFMaterialsSheenExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n  }\n\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n    return _three.MeshPhysicalMaterial;\n  }\n\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n\n    const pending = [];\n    materialParams.sheenColor = new _three.Color(0, 0, 0);\n    materialParams.sheenRoughness = 0;\n    materialParams.sheen = 1;\n    const extension = materialDef.extensions[this.name];\n\n    if (extension.sheenColorFactor !== undefined) {\n      materialParams.sheenColor.fromArray(extension.sheenColorFactor);\n    }\n\n    if (extension.sheenRoughnessFactor !== undefined) {\n      materialParams.sheenRoughness = extension.sheenRoughnessFactor;\n    }\n\n    if (extension.sheenColorTexture !== undefined) {\n      pending.push(parser.assignTexture(materialParams, 'sheenColorMap', extension.sheenColorTexture, _three.sRGBEncoding));\n    }\n\n    if (extension.sheenRoughnessTexture !== undefined) {\n      pending.push(parser.assignTexture(materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture));\n    }\n\n    return Promise.all(pending);\n  }\n\n}\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\n\n\nclass GLTFMaterialsTransmissionExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n  }\n\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n    return _three.MeshPhysicalMaterial;\n  }\n\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n\n    const pending = [];\n    const extension = materialDef.extensions[this.name];\n\n    if (extension.transmissionFactor !== undefined) {\n      materialParams.transmission = extension.transmissionFactor;\n    }\n\n    if (extension.transmissionTexture !== undefined) {\n      pending.push(parser.assignTexture(materialParams, 'transmissionMap', extension.transmissionTexture));\n    }\n\n    return Promise.all(pending);\n  }\n\n}\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\n\n\nclass GLTFMaterialsVolumeExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n  }\n\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n    return _three.MeshPhysicalMaterial;\n  }\n\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n\n    const pending = [];\n    const extension = materialDef.extensions[this.name];\n    materialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n    if (extension.thicknessTexture !== undefined) {\n      pending.push(parser.assignTexture(materialParams, 'thicknessMap', extension.thicknessTexture));\n    }\n\n    materialParams.attenuationDistance = extension.attenuationDistance || Infinity;\n    const colorArray = extension.attenuationColor || [1, 1, 1];\n    materialParams.attenuationColor = new _three.Color(colorArray[0], colorArray[1], colorArray[2]);\n    return Promise.all(pending);\n  }\n\n}\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\n\n\nclass GLTFMaterialsIorExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_IOR;\n  }\n\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n    return _three.MeshPhysicalMaterial;\n  }\n\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n\n    const extension = materialDef.extensions[this.name];\n    materialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n    return Promise.resolve();\n  }\n\n}\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\n\n\nclass GLTFMaterialsSpecularExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n  }\n\n  getMaterialType(materialIndex) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n    return _three.MeshPhysicalMaterial;\n  }\n\n  extendMaterialParams(materialIndex, materialParams) {\n    const parser = this.parser;\n    const materialDef = parser.json.materials[materialIndex];\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return Promise.resolve();\n    }\n\n    const pending = [];\n    const extension = materialDef.extensions[this.name];\n    materialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n    if (extension.specularTexture !== undefined) {\n      pending.push(parser.assignTexture(materialParams, 'specularIntensityMap', extension.specularTexture));\n    }\n\n    const colorArray = extension.specularColorFactor || [1, 1, 1];\n    materialParams.specularColor = new _three.Color(colorArray[0], colorArray[1], colorArray[2]);\n\n    if (extension.specularColorTexture !== undefined) {\n      pending.push(parser.assignTexture(materialParams, 'specularColorMap', extension.specularColorTexture, _three.sRGBEncoding));\n    }\n\n    return Promise.all(pending);\n  }\n\n}\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\n\n\nclass GLTFTextureBasisUExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n  }\n\n  loadTexture(textureIndex) {\n    const parser = this.parser;\n    const json = parser.json;\n    const textureDef = json.textures[textureIndex];\n\n    if (!textureDef.extensions || !textureDef.extensions[this.name]) {\n      return null;\n    }\n\n    const extension = textureDef.extensions[this.name];\n    const loader = parser.options.ktx2Loader;\n\n    if (!loader) {\n      if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n        throw new Error('THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures');\n      } else {\n        // Assumes that the extension is optional and that a fallback texture is present\n        return null;\n      }\n    }\n\n    return parser.loadTextureImage(textureIndex, extension.source, loader);\n  }\n\n}\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\n\n\nclass GLTFTextureWebPExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n    this.isSupported = null;\n  }\n\n  loadTexture(textureIndex) {\n    const name = this.name;\n    const parser = this.parser;\n    const json = parser.json;\n    const textureDef = json.textures[textureIndex];\n\n    if (!textureDef.extensions || !textureDef.extensions[name]) {\n      return null;\n    }\n\n    const extension = textureDef.extensions[name];\n    const source = json.images[extension.source];\n    let loader = parser.textureLoader;\n\n    if (source.uri) {\n      const handler = parser.options.manager.getHandler(source.uri);\n      if (handler !== null) loader = handler;\n    }\n\n    return this.detectSupport().then(function (isSupported) {\n      if (isSupported) return parser.loadTextureImage(textureIndex, extension.source, loader);\n\n      if (json.extensionsRequired && json.extensionsRequired.indexOf(name) >= 0) {\n        throw new Error('THREE.GLTFLoader: WebP required by asset but unsupported.');\n      } // Fall back to PNG or JPEG.\n\n\n      return parser.loadTexture(textureIndex);\n    });\n  }\n\n  detectSupport() {\n    if (!this.isSupported) {\n      this.isSupported = new Promise(function (resolve) {\n        const image = new Image(); // Lossy test image. Support for lossy images doesn't guarantee support for all\n        // WebP images, unfortunately.\n\n        image.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n        image.onload = image.onerror = function () {\n          resolve(image.height === 1);\n        };\n      });\n    }\n\n    return this.isSupported;\n  }\n\n}\n/**\n * AVIF Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_avif\n */\n\n\nclass GLTFTextureAVIFExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = EXTENSIONS.EXT_TEXTURE_AVIF;\n    this.isSupported = null;\n  }\n\n  loadTexture(textureIndex) {\n    const name = this.name;\n    const parser = this.parser;\n    const json = parser.json;\n    const textureDef = json.textures[textureIndex];\n\n    if (!textureDef.extensions || !textureDef.extensions[name]) {\n      return null;\n    }\n\n    const extension = textureDef.extensions[name];\n    const source = json.images[extension.source];\n    let loader = parser.textureLoader;\n\n    if (source.uri) {\n      const handler = parser.options.manager.getHandler(source.uri);\n      if (handler !== null) loader = handler;\n    }\n\n    return this.detectSupport().then(function (isSupported) {\n      if (isSupported) return parser.loadTextureImage(textureIndex, extension.source, loader);\n\n      if (json.extensionsRequired && json.extensionsRequired.indexOf(name) >= 0) {\n        throw new Error('THREE.GLTFLoader: AVIF required by asset but unsupported.');\n      } // Fall back to PNG or JPEG.\n\n\n      return parser.loadTexture(textureIndex);\n    });\n  }\n\n  detectSupport() {\n    if (!this.isSupported) {\n      this.isSupported = new Promise(function (resolve) {\n        const image = new Image(); // Lossy test image.\n\n        image.src = 'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=';\n\n        image.onload = image.onerror = function () {\n          resolve(image.height === 1);\n        };\n      });\n    }\n\n    return this.isSupported;\n  }\n\n}\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\n\n\nclass GLTFMeshoptCompression {\n  constructor(parser) {\n    this.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n    this.parser = parser;\n  }\n\n  loadBufferView(index) {\n    const json = this.parser.json;\n    const bufferView = json.bufferViews[index];\n\n    if (bufferView.extensions && bufferView.extensions[this.name]) {\n      const extensionDef = bufferView.extensions[this.name];\n      const buffer = this.parser.getDependency('buffer', extensionDef.buffer);\n      const decoder = this.parser.options.meshoptDecoder;\n\n      if (!decoder || !decoder.supported) {\n        if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n          throw new Error('THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files');\n        } else {\n          // Assumes that the extension is optional and that fallback buffer data is present\n          return null;\n        }\n      }\n\n      return buffer.then(function (res) {\n        const byteOffset = extensionDef.byteOffset || 0;\n        const byteLength = extensionDef.byteLength || 0;\n        const count = extensionDef.count;\n        const stride = extensionDef.byteStride;\n        const source = new Uint8Array(res, byteOffset, byteLength);\n\n        if (decoder.decodeGltfBufferAsync) {\n          return decoder.decodeGltfBufferAsync(count, stride, source, extensionDef.mode, extensionDef.filter).then(function (res) {\n            return res.buffer;\n          });\n        } else {\n          // Support for MeshoptDecoder 0.18 or earlier, without decodeGltfBufferAsync\n          return decoder.ready.then(function () {\n            const result = new ArrayBuffer(count * stride);\n            decoder.decodeGltfBuffer(new Uint8Array(result), count, stride, source, extensionDef.mode, extensionDef.filter);\n            return result;\n          });\n        }\n      });\n    } else {\n      return null;\n    }\n  }\n\n}\n/**\n * GPU Instancing Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing\n *\n */\n\n\nclass GLTFMeshGpuInstancing {\n  constructor(parser) {\n    this.name = EXTENSIONS.EXT_MESH_GPU_INSTANCING;\n    this.parser = parser;\n  }\n\n  createNodeMesh(nodeIndex) {\n    const json = this.parser.json;\n    const nodeDef = json.nodes[nodeIndex];\n\n    if (!nodeDef.extensions || !nodeDef.extensions[this.name] || nodeDef.mesh === undefined) {\n      return null;\n    }\n\n    const meshDef = json.meshes[nodeDef.mesh]; // No Points or Lines + Instancing support yet\n\n    for (const primitive of meshDef.primitives) {\n      if (primitive.mode !== WEBGL_CONSTANTS.TRIANGLES && primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_STRIP && primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_FAN && primitive.mode !== undefined) {\n        return null;\n      }\n    }\n\n    const extensionDef = nodeDef.extensions[this.name];\n    const attributesDef = extensionDef.attributes; // @TODO: Can we support InstancedMesh + SkinnedMesh?\n\n    const pending = [];\n    const attributes = {};\n\n    for (const key in attributesDef) {\n      pending.push(this.parser.getDependency('accessor', attributesDef[key]).then(accessor => {\n        attributes[key] = accessor;\n        return attributes[key];\n      }));\n    }\n\n    if (pending.length < 1) {\n      return null;\n    }\n\n    pending.push(this.parser.createNodeMesh(nodeIndex));\n    return Promise.all(pending).then(results => {\n      const nodeObject = results.pop();\n      const meshes = nodeObject.isGroup ? nodeObject.children : [nodeObject];\n      const count = results[0].count; // All attribute counts should be same\n\n      const instancedMeshes = [];\n\n      for (const mesh of meshes) {\n        // Temporal variables\n        const m = new _three.Matrix4();\n        const p = new _three.Vector3();\n        const q = new _three.Quaternion();\n        const s = new _three.Vector3(1, 1, 1);\n        const instancedMesh = new _three.InstancedMesh(mesh.geometry, mesh.material, count);\n\n        for (let i = 0; i < count; i++) {\n          if (attributes.TRANSLATION) {\n            p.fromBufferAttribute(attributes.TRANSLATION, i);\n          }\n\n          if (attributes.ROTATION) {\n            q.fromBufferAttribute(attributes.ROTATION, i);\n          }\n\n          if (attributes.SCALE) {\n            s.fromBufferAttribute(attributes.SCALE, i);\n          }\n\n          instancedMesh.setMatrixAt(i, m.compose(p, q, s));\n        } // Add instance attributes to the geometry, excluding TRS.\n\n\n        for (const attributeName in attributes) {\n          if (attributeName !== 'TRANSLATION' && attributeName !== 'ROTATION' && attributeName !== 'SCALE') {\n            mesh.geometry.setAttribute(attributeName, attributes[attributeName]);\n          }\n        } // Just in case\n\n\n        _three.Object3D.prototype.copy.call(instancedMesh, mesh);\n\n        this.parser.assignFinalMaterial(instancedMesh);\n        instancedMeshes.push(instancedMesh);\n      }\n\n      if (nodeObject.isGroup) {\n        nodeObject.clear();\n        nodeObject.add(...instancedMeshes);\n        return nodeObject;\n      }\n\n      return instancedMeshes[0];\n    });\n  }\n\n}\n/* BINARY EXTENSION */\n\n\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = {\n  JSON: 0x4E4F534A,\n  BIN: 0x004E4942\n};\n\nclass GLTFBinaryExtension {\n  constructor(data) {\n    this.name = EXTENSIONS.KHR_BINARY_GLTF;\n    this.content = null;\n    this.body = null;\n    const headerView = new DataView(data, 0, BINARY_EXTENSION_HEADER_LENGTH);\n    const textDecoder = new TextDecoder();\n    this.header = {\n      magic: textDecoder.decode(new Uint8Array(data.slice(0, 4))),\n      version: headerView.getUint32(4, true),\n      length: headerView.getUint32(8, true)\n    };\n\n    if (this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC) {\n      throw new Error('THREE.GLTFLoader: Unsupported glTF-Binary header.');\n    } else if (this.header.version < 2.0) {\n      throw new Error('THREE.GLTFLoader: Legacy binary file detected.');\n    }\n\n    const chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n    const chunkView = new DataView(data, BINARY_EXTENSION_HEADER_LENGTH);\n    let chunkIndex = 0;\n\n    while (chunkIndex < chunkContentsLength) {\n      const chunkLength = chunkView.getUint32(chunkIndex, true);\n      chunkIndex += 4;\n      const chunkType = chunkView.getUint32(chunkIndex, true);\n      chunkIndex += 4;\n\n      if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON) {\n        const contentArray = new Uint8Array(data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength);\n        this.content = textDecoder.decode(contentArray);\n      } else if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN) {\n        const byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n        this.body = data.slice(byteOffset, byteOffset + chunkLength);\n      } // Clients must ignore chunks with unknown types.\n\n\n      chunkIndex += chunkLength;\n    }\n\n    if (this.content === null) {\n      throw new Error('THREE.GLTFLoader: JSON content not found.');\n    }\n  }\n\n}\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\n\n\nclass GLTFDracoMeshCompressionExtension {\n  constructor(json, dracoLoader) {\n    if (!dracoLoader) {\n      throw new Error('THREE.GLTFLoader: No DRACOLoader instance provided.');\n    }\n\n    this.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n    this.json = json;\n    this.dracoLoader = dracoLoader;\n    this.dracoLoader.preload();\n  }\n\n  decodePrimitive(primitive, parser) {\n    const json = this.json;\n    const dracoLoader = this.dracoLoader;\n    const bufferViewIndex = primitive.extensions[this.name].bufferView;\n    const gltfAttributeMap = primitive.extensions[this.name].attributes;\n    const threeAttributeMap = {};\n    const attributeNormalizedMap = {};\n    const attributeTypeMap = {};\n\n    for (const attributeName in gltfAttributeMap) {\n      const threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n      threeAttributeMap[threeAttributeName] = gltfAttributeMap[attributeName];\n    }\n\n    for (const attributeName in primitive.attributes) {\n      const threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n\n      if (gltfAttributeMap[attributeName] !== undefined) {\n        const accessorDef = json.accessors[primitive.attributes[attributeName]];\n        const componentType = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n        attributeTypeMap[threeAttributeName] = componentType.name;\n        attributeNormalizedMap[threeAttributeName] = accessorDef.normalized === true;\n      }\n    }\n\n    return parser.getDependency('bufferView', bufferViewIndex).then(function (bufferView) {\n      return new Promise(function (resolve) {\n        dracoLoader.decodeDracoFile(bufferView, function (geometry) {\n          for (const attributeName in geometry.attributes) {\n            const attribute = geometry.attributes[attributeName];\n            const normalized = attributeNormalizedMap[attributeName];\n            if (normalized !== undefined) attribute.normalized = normalized;\n          }\n\n          resolve(geometry);\n        }, threeAttributeMap, attributeTypeMap);\n      });\n    });\n  }\n\n}\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\n\n\nclass GLTFTextureTransformExtension {\n  constructor() {\n    this.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n  }\n\n  extendTexture(texture, transform) {\n    if ((transform.texCoord === undefined || transform.texCoord === texture.channel) && transform.offset === undefined && transform.rotation === undefined && transform.scale === undefined) {\n      // See https://github.com/mrdoob/three.js/issues/21819.\n      return texture;\n    }\n\n    texture = texture.clone();\n\n    if (transform.texCoord !== undefined) {\n      texture.channel = transform.texCoord;\n    }\n\n    if (transform.offset !== undefined) {\n      texture.offset.fromArray(transform.offset);\n    }\n\n    if (transform.rotation !== undefined) {\n      texture.rotation = transform.rotation;\n    }\n\n    if (transform.scale !== undefined) {\n      texture.repeat.fromArray(transform.scale);\n    }\n\n    texture.needsUpdate = true;\n    return texture;\n  }\n\n}\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\n\n\nclass GLTFMeshQuantizationExtension {\n  constructor() {\n    this.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n  }\n\n}\n/*********************************/\n\n/********** INTERPOLATION ********/\n\n/*********************************/\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\n\nclass GLTFCubicSplineInterpolant extends _three.Interpolant {\n  constructor(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    super(parameterPositions, sampleValues, sampleSize, resultBuffer);\n  }\n\n  copySampleValue_(index) {\n    // Copies a sample value to the result buffer. See description of glTF\n    // CUBICSPLINE values layout in interpolate_() function below.\n    const result = this.resultBuffer,\n          values = this.sampleValues,\n          valueSize = this.valueSize,\n          offset = index * valueSize * 3 + valueSize;\n\n    for (let i = 0; i !== valueSize; i++) {\n      result[i] = values[offset + i];\n    }\n\n    return result;\n  }\n\n  interpolate_(i1, t0, t, t1) {\n    const result = this.resultBuffer;\n    const values = this.sampleValues;\n    const stride = this.valueSize;\n    const stride2 = stride * 2;\n    const stride3 = stride * 3;\n    const td = t1 - t0;\n    const p = (t - t0) / td;\n    const pp = p * p;\n    const ppp = pp * p;\n    const offset1 = i1 * stride3;\n    const offset0 = offset1 - stride3;\n    const s2 = -2 * ppp + 3 * pp;\n    const s3 = ppp - pp;\n    const s0 = 1 - s2;\n    const s1 = s3 - pp + p; // Layout of keyframe output values for CUBICSPLINE animations:\n    //   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\n    for (let i = 0; i !== stride; i++) {\n      const p0 = values[offset0 + i + stride]; // splineVertex_k\n\n      const m0 = values[offset0 + i + stride2] * td; // outTangent_k * (t_k+1 - t_k)\n\n      const p1 = values[offset1 + i + stride]; // splineVertex_k+1\n\n      const m1 = values[offset1 + i] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n      result[i] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n    }\n\n    return result;\n  }\n\n}\n\nconst _q = new _three.Quaternion();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n  interpolate_(i1, t0, t, t1) {\n    const result = super.interpolate_(i1, t0, t, t1);\n\n    _q.fromArray(result).normalize().toArray(result);\n\n    return result;\n  }\n\n}\n/*********************************/\n\n/********** INTERNALS ************/\n\n/*********************************/\n\n/* CONSTANTS */\n\n\nconst WEBGL_CONSTANTS = {\n  FLOAT: 5126,\n  //FLOAT_MAT2: 35674,\n  FLOAT_MAT3: 35675,\n  FLOAT_MAT4: 35676,\n  FLOAT_VEC2: 35664,\n  FLOAT_VEC3: 35665,\n  FLOAT_VEC4: 35666,\n  LINEAR: 9729,\n  REPEAT: 10497,\n  SAMPLER_2D: 35678,\n  POINTS: 0,\n  LINES: 1,\n  LINE_LOOP: 2,\n  LINE_STRIP: 3,\n  TRIANGLES: 4,\n  TRIANGLE_STRIP: 5,\n  TRIANGLE_FAN: 6,\n  UNSIGNED_BYTE: 5121,\n  UNSIGNED_SHORT: 5123\n};\nconst WEBGL_COMPONENT_TYPES = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nconst WEBGL_FILTERS = {\n  9728: _three.NearestFilter,\n  9729: _three.LinearFilter,\n  9984: _three.NearestMipmapNearestFilter,\n  9985: _three.LinearMipmapNearestFilter,\n  9986: _three.NearestMipmapLinearFilter,\n  9987: _three.LinearMipmapLinearFilter\n};\nconst WEBGL_WRAPPINGS = {\n  33071: _three.ClampToEdgeWrapping,\n  33648: _three.MirroredRepeatWrapping,\n  10497: _three.RepeatWrapping\n};\nconst WEBGL_TYPE_SIZES = {\n  'SCALAR': 1,\n  'VEC2': 2,\n  'VEC3': 3,\n  'VEC4': 4,\n  'MAT2': 4,\n  'MAT3': 9,\n  'MAT4': 16\n};\nconst ATTRIBUTES = {\n  POSITION: 'position',\n  NORMAL: 'normal',\n  TANGENT: 'tangent',\n  TEXCOORD_0: 'uv',\n  TEXCOORD_1: 'uv2',\n  COLOR_0: 'color',\n  WEIGHTS_0: 'skinWeight',\n  JOINTS_0: 'skinIndex'\n};\nconst PATH_PROPERTIES = {\n  scale: 'scale',\n  translation: 'position',\n  rotation: 'quaternion',\n  weights: 'morphTargetInfluences'\n};\nconst INTERPOLATION = {\n  CUBICSPLINE: undefined,\n  // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n  // keyframe track will be initialized with a default interpolation type, then modified.\n  LINEAR: _three.InterpolateLinear,\n  STEP: _three.InterpolateDiscrete\n};\nconst ALPHA_MODES = {\n  OPAQUE: 'OPAQUE',\n  MASK: 'MASK',\n  BLEND: 'BLEND'\n};\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\n\nfunction createDefaultMaterial(cache) {\n  if (cache['DefaultMaterial'] === undefined) {\n    cache['DefaultMaterial'] = new _three.MeshStandardMaterial({\n      color: 0xFFFFFF,\n      emissive: 0x000000,\n      metalness: 1,\n      roughness: 1,\n      transparent: false,\n      depthTest: true,\n      side: _three.FrontSide\n    });\n  }\n\n  return cache['DefaultMaterial'];\n}\n\nfunction addUnknownExtensionsToUserData(knownExtensions, object, objectDef) {\n  // Add unknown glTF extensions to an object's userData.\n  for (const name in objectDef.extensions) {\n    if (knownExtensions[name] === undefined) {\n      object.userData.gltfExtensions = object.userData.gltfExtensions || {};\n      object.userData.gltfExtensions[name] = objectDef.extensions[name];\n    }\n  }\n}\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\n\n\nfunction assignExtrasToUserData(object, gltfDef) {\n  if (gltfDef.extras !== undefined) {\n    if (typeof gltfDef.extras === 'object') {\n      Object.assign(object.userData, gltfDef.extras);\n    } else {\n      console.warn('THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras);\n    }\n  }\n}\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\n\n\nfunction addMorphTargets(geometry, targets, parser) {\n  let hasMorphPosition = false;\n  let hasMorphNormal = false;\n  let hasMorphColor = false;\n\n  for (let i = 0, il = targets.length; i < il; i++) {\n    const target = targets[i];\n    if (target.POSITION !== undefined) hasMorphPosition = true;\n    if (target.NORMAL !== undefined) hasMorphNormal = true;\n    if (target.COLOR_0 !== undefined) hasMorphColor = true;\n    if (hasMorphPosition && hasMorphNormal && hasMorphColor) break;\n  }\n\n  if (!hasMorphPosition && !hasMorphNormal && !hasMorphColor) return Promise.resolve(geometry);\n  const pendingPositionAccessors = [];\n  const pendingNormalAccessors = [];\n  const pendingColorAccessors = [];\n\n  for (let i = 0, il = targets.length; i < il; i++) {\n    const target = targets[i];\n\n    if (hasMorphPosition) {\n      const pendingAccessor = target.POSITION !== undefined ? parser.getDependency('accessor', target.POSITION) : geometry.attributes.position;\n      pendingPositionAccessors.push(pendingAccessor);\n    }\n\n    if (hasMorphNormal) {\n      const pendingAccessor = target.NORMAL !== undefined ? parser.getDependency('accessor', target.NORMAL) : geometry.attributes.normal;\n      pendingNormalAccessors.push(pendingAccessor);\n    }\n\n    if (hasMorphColor) {\n      const pendingAccessor = target.COLOR_0 !== undefined ? parser.getDependency('accessor', target.COLOR_0) : geometry.attributes.color;\n      pendingColorAccessors.push(pendingAccessor);\n    }\n  }\n\n  return Promise.all([Promise.all(pendingPositionAccessors), Promise.all(pendingNormalAccessors), Promise.all(pendingColorAccessors)]).then(function (accessors) {\n    const morphPositions = accessors[0];\n    const morphNormals = accessors[1];\n    const morphColors = accessors[2];\n    if (hasMorphPosition) geometry.morphAttributes.position = morphPositions;\n    if (hasMorphNormal) geometry.morphAttributes.normal = morphNormals;\n    if (hasMorphColor) geometry.morphAttributes.color = morphColors;\n    geometry.morphTargetsRelative = true;\n    return geometry;\n  });\n}\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\n\n\nfunction updateMorphTargets(mesh, meshDef) {\n  mesh.updateMorphTargets();\n\n  if (meshDef.weights !== undefined) {\n    for (let i = 0, il = meshDef.weights.length; i < il; i++) {\n      mesh.morphTargetInfluences[i] = meshDef.weights[i];\n    }\n  } // .extras has user-defined data, so check that .extras.targetNames is an array.\n\n\n  if (meshDef.extras && Array.isArray(meshDef.extras.targetNames)) {\n    const targetNames = meshDef.extras.targetNames;\n\n    if (mesh.morphTargetInfluences.length === targetNames.length) {\n      mesh.morphTargetDictionary = {};\n\n      for (let i = 0, il = targetNames.length; i < il; i++) {\n        mesh.morphTargetDictionary[targetNames[i]] = i;\n      }\n    } else {\n      console.warn('THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.');\n    }\n  }\n}\n\nfunction createPrimitiveKey(primitiveDef) {\n  const dracoExtension = primitiveDef.extensions && primitiveDef.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];\n  let geometryKey;\n\n  if (dracoExtension) {\n    geometryKey = 'draco:' + dracoExtension.bufferView + ':' + dracoExtension.indices + ':' + createAttributesKey(dracoExtension.attributes);\n  } else {\n    geometryKey = primitiveDef.indices + ':' + createAttributesKey(primitiveDef.attributes) + ':' + primitiveDef.mode;\n  }\n\n  return geometryKey;\n}\n\nfunction createAttributesKey(attributes) {\n  let attributesKey = '';\n  const keys = Object.keys(attributes).sort();\n\n  for (let i = 0, il = keys.length; i < il; i++) {\n    attributesKey += keys[i] + ':' + attributes[keys[i]] + ';';\n  }\n\n  return attributesKey;\n}\n\nfunction getNormalizedComponentScale(constructor) {\n  // Reference:\n  // https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n  switch (constructor) {\n    case Int8Array:\n      return 1 / 127;\n\n    case Uint8Array:\n      return 1 / 255;\n\n    case Int16Array:\n      return 1 / 32767;\n\n    case Uint16Array:\n      return 1 / 65535;\n\n    default:\n      throw new Error('THREE.GLTFLoader: Unsupported normalized accessor component type.');\n  }\n}\n\nfunction getImageURIMimeType(uri) {\n  if (uri.search(/\\.jpe?g($|\\?)/i) > 0 || uri.search(/^data\\:image\\/jpeg/) === 0) return 'image/jpeg';\n  if (uri.search(/\\.webp($|\\?)/i) > 0 || uri.search(/^data\\:image\\/webp/) === 0) return 'image/webp';\n  return 'image/png';\n}\n\nconst _identityMatrix = new _three.Matrix4();\n/* GLTF PARSER */\n\n\nclass GLTFParser {\n  constructor(json = {}, options = {}) {\n    this.json = json;\n    this.extensions = {};\n    this.plugins = {};\n    this.options = options; // loader object cache\n\n    this.cache = new GLTFRegistry(); // associations between Three.js objects and glTF elements\n\n    this.associations = new Map(); // BufferGeometry caching\n\n    this.primitiveCache = {}; // Node cache\n\n    this.nodeCache = {}; // Object3D instance caches\n\n    this.meshCache = {\n      refs: {},\n      uses: {}\n    };\n    this.cameraCache = {\n      refs: {},\n      uses: {}\n    };\n    this.lightCache = {\n      refs: {},\n      uses: {}\n    };\n    this.sourceCache = {};\n    this.textureCache = {}; // Track node names, to ensure no duplicates\n\n    this.nodeNamesUsed = {}; // Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n    // expensive work of uploading a texture to the GPU off the main thread.\n\n    let isSafari = false;\n    let isFirefox = false;\n    let firefoxVersion = -1;\n\n    if (typeof navigator !== 'undefined') {\n      isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) === true;\n      isFirefox = navigator.userAgent.indexOf('Firefox') > -1;\n      firefoxVersion = isFirefox ? navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)[1] : -1;\n    }\n\n    if (typeof createImageBitmap === 'undefined' || isSafari || isFirefox && firefoxVersion < 98) {\n      this.textureLoader = new _three.TextureLoader(this.options.manager);\n    } else {\n      this.textureLoader = new _three.ImageBitmapLoader(this.options.manager);\n    }\n\n    this.textureLoader.setCrossOrigin(this.options.crossOrigin);\n    this.textureLoader.setRequestHeader(this.options.requestHeader);\n    this.fileLoader = new _three.FileLoader(this.options.manager);\n    this.fileLoader.setResponseType('arraybuffer');\n\n    if (this.options.crossOrigin === 'use-credentials') {\n      this.fileLoader.setWithCredentials(true);\n    }\n  }\n\n  setExtensions(extensions) {\n    this.extensions = extensions;\n  }\n\n  setPlugins(plugins) {\n    this.plugins = plugins;\n  }\n\n  parse(onLoad, onError) {\n    const parser = this;\n    const json = this.json;\n    const extensions = this.extensions; // Clear the loader cache\n\n    this.cache.removeAll();\n    this.nodeCache = {}; // Mark the special nodes/meshes in json for efficient parse\n\n    this._invokeAll(function (ext) {\n      return ext._markDefs && ext._markDefs();\n    });\n\n    Promise.all(this._invokeAll(function (ext) {\n      return ext.beforeRoot && ext.beforeRoot();\n    })).then(function () {\n      return Promise.all([parser.getDependencies('scene'), parser.getDependencies('animation'), parser.getDependencies('camera')]);\n    }).then(function (dependencies) {\n      const result = {\n        scene: dependencies[0][json.scene || 0],\n        scenes: dependencies[0],\n        animations: dependencies[1],\n        cameras: dependencies[2],\n        asset: json.asset,\n        parser: parser,\n        userData: {}\n      };\n      addUnknownExtensionsToUserData(extensions, result, json);\n      assignExtrasToUserData(result, json);\n      Promise.all(parser._invokeAll(function (ext) {\n        return ext.afterRoot && ext.afterRoot(result);\n      })).then(function () {\n        onLoad(result);\n      });\n    }).catch(onError);\n  }\n  /**\n   * Marks the special nodes/meshes in json for efficient parse.\n   */\n\n\n  _markDefs() {\n    const nodeDefs = this.json.nodes || [];\n    const skinDefs = this.json.skins || [];\n    const meshDefs = this.json.meshes || []; // Nothing in the node definition indicates whether it is a Bone or an\n    // Object3D. Use the skins' joint references to mark bones.\n\n    for (let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex++) {\n      const joints = skinDefs[skinIndex].joints;\n\n      for (let i = 0, il = joints.length; i < il; i++) {\n        nodeDefs[joints[i]].isBone = true;\n      }\n    } // Iterate over all nodes, marking references to shared resources,\n    // as well as skeleton joints.\n\n\n    for (let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n      const nodeDef = nodeDefs[nodeIndex];\n\n      if (nodeDef.mesh !== undefined) {\n        this._addNodeRef(this.meshCache, nodeDef.mesh); // Nothing in the mesh definition indicates whether it is\n        // a SkinnedMesh or Mesh. Use the node's mesh reference\n        // to mark SkinnedMesh if node has skin.\n\n\n        if (nodeDef.skin !== undefined) {\n          meshDefs[nodeDef.mesh].isSkinnedMesh = true;\n        }\n      }\n\n      if (nodeDef.camera !== undefined) {\n        this._addNodeRef(this.cameraCache, nodeDef.camera);\n      }\n    }\n  }\n  /**\n   * Counts references to shared node / Object3D resources. These resources\n   * can be reused, or \"instantiated\", at multiple nodes in the scene\n   * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n   * be marked. Non-scenegraph resources (like Materials, Geometries, and\n   * Textures) can be reused directly and are not marked here.\n   *\n   * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n   */\n\n\n  _addNodeRef(cache, index) {\n    if (index === undefined) return;\n\n    if (cache.refs[index] === undefined) {\n      cache.refs[index] = cache.uses[index] = 0;\n    }\n\n    cache.refs[index]++;\n  }\n  /** Returns a reference to a shared resource, cloning it if necessary. */\n\n\n  _getNodeRef(cache, index, object) {\n    if (cache.refs[index] <= 1) return object;\n    const ref = object.clone(); // Propagates mappings to the cloned object, prevents mappings on the\n    // original object from being lost.\n\n    const updateMappings = (original, clone) => {\n      const mappings = this.associations.get(original);\n\n      if (mappings != null) {\n        this.associations.set(clone, mappings);\n      }\n\n      for (const [i, child] of original.children.entries()) {\n        updateMappings(child, clone.children[i]);\n      }\n    };\n\n    updateMappings(object, ref);\n    ref.name += '_instance_' + cache.uses[index]++;\n    return ref;\n  }\n\n  _invokeOne(func) {\n    const extensions = Object.values(this.plugins);\n    extensions.push(this);\n\n    for (let i = 0; i < extensions.length; i++) {\n      const result = func(extensions[i]);\n      if (result) return result;\n    }\n\n    return null;\n  }\n\n  _invokeAll(func) {\n    const extensions = Object.values(this.plugins);\n    extensions.unshift(this);\n    const pending = [];\n\n    for (let i = 0; i < extensions.length; i++) {\n      const result = func(extensions[i]);\n      if (result) pending.push(result);\n    }\n\n    return pending;\n  }\n  /**\n   * Requests the specified dependency asynchronously, with caching.\n   * @param {string} type\n   * @param {number} index\n   * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n   */\n\n\n  getDependency(type, index) {\n    const cacheKey = type + ':' + index;\n    let dependency = this.cache.get(cacheKey);\n\n    if (!dependency) {\n      switch (type) {\n        case 'scene':\n          dependency = this.loadScene(index);\n          break;\n\n        case 'node':\n          dependency = this._invokeOne(function (ext) {\n            return ext.loadNode && ext.loadNode(index);\n          });\n          break;\n\n        case 'mesh':\n          dependency = this._invokeOne(function (ext) {\n            return ext.loadMesh && ext.loadMesh(index);\n          });\n          break;\n\n        case 'accessor':\n          dependency = this.loadAccessor(index);\n          break;\n\n        case 'bufferView':\n          dependency = this._invokeOne(function (ext) {\n            return ext.loadBufferView && ext.loadBufferView(index);\n          });\n          break;\n\n        case 'buffer':\n          dependency = this.loadBuffer(index);\n          break;\n\n        case 'material':\n          dependency = this._invokeOne(function (ext) {\n            return ext.loadMaterial && ext.loadMaterial(index);\n          });\n          break;\n\n        case 'texture':\n          dependency = this._invokeOne(function (ext) {\n            return ext.loadTexture && ext.loadTexture(index);\n          });\n          break;\n\n        case 'skin':\n          dependency = this.loadSkin(index);\n          break;\n\n        case 'animation':\n          dependency = this._invokeOne(function (ext) {\n            return ext.loadAnimation && ext.loadAnimation(index);\n          });\n          break;\n\n        case 'camera':\n          dependency = this.loadCamera(index);\n          break;\n\n        default:\n          dependency = this._invokeOne(function (ext) {\n            return ext != this && ext.getDependency && ext.getDependency(type, index);\n          });\n\n          if (!dependency) {\n            throw new Error('Unknown type: ' + type);\n          }\n\n          break;\n      }\n\n      this.cache.add(cacheKey, dependency);\n    }\n\n    return dependency;\n  }\n  /**\n   * Requests all dependencies of the specified type asynchronously, with caching.\n   * @param {string} type\n   * @return {Promise<Array<Object>>}\n   */\n\n\n  getDependencies(type) {\n    let dependencies = this.cache.get(type);\n\n    if (!dependencies) {\n      const parser = this;\n      const defs = this.json[type + (type === 'mesh' ? 'es' : 's')] || [];\n      dependencies = Promise.all(defs.map(function (def, index) {\n        return parser.getDependency(type, index);\n      }));\n      this.cache.add(type, dependencies);\n    }\n\n    return dependencies;\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n   * @param {number} bufferIndex\n   * @return {Promise<ArrayBuffer>}\n   */\n\n\n  loadBuffer(bufferIndex) {\n    const bufferDef = this.json.buffers[bufferIndex];\n    const loader = this.fileLoader;\n\n    if (bufferDef.type && bufferDef.type !== 'arraybuffer') {\n      throw new Error('THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.');\n    } // If present, GLB container is required to be the first buffer.\n\n\n    if (bufferDef.uri === undefined && bufferIndex === 0) {\n      return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);\n    }\n\n    const options = this.options;\n    return new Promise(function (resolve, reject) {\n      loader.load(_three.LoaderUtils.resolveURL(bufferDef.uri, options.path), resolve, undefined, function () {\n        reject(new Error('THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".'));\n      });\n    });\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n   * @param {number} bufferViewIndex\n   * @return {Promise<ArrayBuffer>}\n   */\n\n\n  loadBufferView(bufferViewIndex) {\n    const bufferViewDef = this.json.bufferViews[bufferViewIndex];\n    return this.getDependency('buffer', bufferViewDef.buffer).then(function (buffer) {\n      const byteLength = bufferViewDef.byteLength || 0;\n      const byteOffset = bufferViewDef.byteOffset || 0;\n      return buffer.slice(byteOffset, byteOffset + byteLength);\n    });\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n   * @param {number} accessorIndex\n   * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n   */\n\n\n  loadAccessor(accessorIndex) {\n    const parser = this;\n    const json = this.json;\n    const accessorDef = this.json.accessors[accessorIndex];\n\n    if (accessorDef.bufferView === undefined && accessorDef.sparse === undefined) {\n      const itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\n      const TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n      const normalized = accessorDef.normalized === true;\n      const array = new TypedArray(accessorDef.count * itemSize);\n      return Promise.resolve(new _three.BufferAttribute(array, itemSize, normalized));\n    }\n\n    const pendingBufferViews = [];\n\n    if (accessorDef.bufferView !== undefined) {\n      pendingBufferViews.push(this.getDependency('bufferView', accessorDef.bufferView));\n    } else {\n      pendingBufferViews.push(null);\n    }\n\n    if (accessorDef.sparse !== undefined) {\n      pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.indices.bufferView));\n      pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.values.bufferView));\n    }\n\n    return Promise.all(pendingBufferViews).then(function (bufferViews) {\n      const bufferView = bufferViews[0];\n      const itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\n      const TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType]; // For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\n      const elementBytes = TypedArray.BYTES_PER_ELEMENT;\n      const itemBytes = elementBytes * itemSize;\n      const byteOffset = accessorDef.byteOffset || 0;\n      const byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[accessorDef.bufferView].byteStride : undefined;\n      const normalized = accessorDef.normalized === true;\n      let array, bufferAttribute; // The buffer is not interleaved if the stride is the item size in bytes.\n\n      if (byteStride && byteStride !== itemBytes) {\n        // Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n        // This makes sure that IBA.count reflects accessor.count properly\n        const ibSlice = Math.floor(byteOffset / byteStride);\n        const ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n        let ib = parser.cache.get(ibCacheKey);\n\n        if (!ib) {\n          array = new TypedArray(bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes); // Integer parameters to IB/IBA are in array elements, not bytes.\n\n          ib = new _three.InterleavedBuffer(array, byteStride / elementBytes);\n          parser.cache.add(ibCacheKey, ib);\n        }\n\n        bufferAttribute = new _three.InterleavedBufferAttribute(ib, itemSize, byteOffset % byteStride / elementBytes, normalized);\n      } else {\n        if (bufferView === null) {\n          array = new TypedArray(accessorDef.count * itemSize);\n        } else {\n          array = new TypedArray(bufferView, byteOffset, accessorDef.count * itemSize);\n        }\n\n        bufferAttribute = new _three.BufferAttribute(array, itemSize, normalized);\n      } // https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\n\n      if (accessorDef.sparse !== undefined) {\n        const itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n        const TypedArrayIndices = WEBGL_COMPONENT_TYPES[accessorDef.sparse.indices.componentType];\n        const byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n        const byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n        const sparseIndices = new TypedArrayIndices(bufferViews[1], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices);\n        const sparseValues = new TypedArray(bufferViews[2], byteOffsetValues, accessorDef.sparse.count * itemSize);\n\n        if (bufferView !== null) {\n          // Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n          bufferAttribute = new _three.BufferAttribute(bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized);\n        }\n\n        for (let i = 0, il = sparseIndices.length; i < il; i++) {\n          const index = sparseIndices[i];\n          bufferAttribute.setX(index, sparseValues[i * itemSize]);\n          if (itemSize >= 2) bufferAttribute.setY(index, sparseValues[i * itemSize + 1]);\n          if (itemSize >= 3) bufferAttribute.setZ(index, sparseValues[i * itemSize + 2]);\n          if (itemSize >= 4) bufferAttribute.setW(index, sparseValues[i * itemSize + 3]);\n          if (itemSize >= 5) throw new Error('THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.');\n        }\n      }\n\n      return bufferAttribute;\n    });\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n   * @param {number} textureIndex\n   * @return {Promise<THREE.Texture|null>}\n   */\n\n\n  loadTexture(textureIndex) {\n    const json = this.json;\n    const options = this.options;\n    const textureDef = json.textures[textureIndex];\n    const sourceIndex = textureDef.source;\n    const sourceDef = json.images[sourceIndex];\n    let loader = this.textureLoader;\n\n    if (sourceDef.uri) {\n      const handler = options.manager.getHandler(sourceDef.uri);\n      if (handler !== null) loader = handler;\n    }\n\n    return this.loadTextureImage(textureIndex, sourceIndex, loader);\n  }\n\n  loadTextureImage(textureIndex, sourceIndex, loader) {\n    const parser = this;\n    const json = this.json;\n    const textureDef = json.textures[textureIndex];\n    const sourceDef = json.images[sourceIndex];\n    const cacheKey = (sourceDef.uri || sourceDef.bufferView) + ':' + textureDef.sampler;\n\n    if (this.textureCache[cacheKey]) {\n      // See https://github.com/mrdoob/three.js/issues/21559.\n      return this.textureCache[cacheKey];\n    }\n\n    const promise = this.loadImageSource(sourceIndex, loader).then(function (texture) {\n      texture.flipY = false;\n      texture.name = textureDef.name || sourceDef.name || '';\n\n      if (texture.name === '' && typeof sourceDef.uri === 'string' && sourceDef.uri.startsWith('data:image/') === false) {\n        texture.name = sourceDef.uri;\n      }\n\n      const samplers = json.samplers || {};\n      const sampler = samplers[textureDef.sampler] || {};\n      texture.magFilter = WEBGL_FILTERS[sampler.magFilter] || _three.LinearFilter;\n      texture.minFilter = WEBGL_FILTERS[sampler.minFilter] || _three.LinearMipmapLinearFilter;\n      texture.wrapS = WEBGL_WRAPPINGS[sampler.wrapS] || _three.RepeatWrapping;\n      texture.wrapT = WEBGL_WRAPPINGS[sampler.wrapT] || _three.RepeatWrapping;\n      parser.associations.set(texture, {\n        textures: textureIndex\n      });\n      return texture;\n    }).catch(function () {\n      return null;\n    });\n    this.textureCache[cacheKey] = promise;\n    return promise;\n  }\n\n  loadImageSource(sourceIndex, loader) {\n    const parser = this;\n    const json = this.json;\n    const options = this.options;\n\n    if (this.sourceCache[sourceIndex] !== undefined) {\n      return this.sourceCache[sourceIndex].then(texture => texture.clone());\n    }\n\n    const sourceDef = json.images[sourceIndex];\n    const URL = self.URL || self.webkitURL;\n    let sourceURI = sourceDef.uri || '';\n    let isObjectURL = false;\n\n    if (sourceDef.bufferView !== undefined) {\n      // Load binary image data from bufferView, if provided.\n      sourceURI = parser.getDependency('bufferView', sourceDef.bufferView).then(function (bufferView) {\n        isObjectURL = true;\n        const blob = new Blob([bufferView], {\n          type: sourceDef.mimeType\n        });\n        sourceURI = URL.createObjectURL(blob);\n        return sourceURI;\n      });\n    } else if (sourceDef.uri === undefined) {\n      throw new Error('THREE.GLTFLoader: Image ' + sourceIndex + ' is missing URI and bufferView');\n    }\n\n    const promise = Promise.resolve(sourceURI).then(function (sourceURI) {\n      return new Promise(function (resolve, reject) {\n        let onLoad = resolve;\n\n        if (loader.isImageBitmapLoader === true) {\n          onLoad = function (imageBitmap) {\n            const texture = new _three.Texture(imageBitmap);\n            texture.needsUpdate = true;\n            resolve(texture);\n          };\n        }\n\n        loader.load(_three.LoaderUtils.resolveURL(sourceURI, options.path), onLoad, undefined, reject);\n      });\n    }).then(function (texture) {\n      // Clean up resources and configure Texture.\n      if (isObjectURL === true) {\n        URL.revokeObjectURL(sourceURI);\n      }\n\n      texture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType(sourceDef.uri);\n      return texture;\n    }).catch(function (error) {\n      console.error('THREE.GLTFLoader: Couldn\\'t load texture', sourceURI);\n      throw error;\n    });\n    this.sourceCache[sourceIndex] = promise;\n    return promise;\n  }\n  /**\n   * Asynchronously assigns a texture to the given material parameters.\n   * @param {Object} materialParams\n   * @param {string} mapName\n   * @param {Object} mapDef\n   * @return {Promise<Texture>}\n   */\n\n\n  assignTexture(materialParams, mapName, mapDef, encoding) {\n    const parser = this;\n    return this.getDependency('texture', mapDef.index).then(function (texture) {\n      if (!texture) return null;\n\n      if (mapDef.texCoord !== undefined && mapDef.texCoord > 0) {\n        texture = texture.clone();\n        texture.channel = mapDef.texCoord;\n      }\n\n      if (parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]) {\n        const transform = mapDef.extensions !== undefined ? mapDef.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM] : undefined;\n\n        if (transform) {\n          const gltfReference = parser.associations.get(texture);\n          texture = parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(texture, transform);\n          parser.associations.set(texture, gltfReference);\n        }\n      }\n\n      if (encoding !== undefined) {\n        texture.encoding = encoding;\n      }\n\n      materialParams[mapName] = texture;\n      return texture;\n    });\n  }\n  /**\n   * Assigns final material to a Mesh, Line, or Points instance. The instance\n   * already has a material (generated from the glTF material options alone)\n   * but reuse of the same glTF material may require multiple threejs materials\n   * to accommodate different primitive types, defines, etc. New materials will\n   * be created if necessary, and reused from a cache.\n   * @param  {Object3D} mesh Mesh, Line, or Points instance.\n   */\n\n\n  assignFinalMaterial(mesh) {\n    const geometry = mesh.geometry;\n    let material = mesh.material;\n    const useDerivativeTangents = geometry.attributes.tangent === undefined;\n    const useVertexColors = geometry.attributes.color !== undefined;\n    const useFlatShading = geometry.attributes.normal === undefined;\n\n    if (mesh.isPoints) {\n      const cacheKey = 'PointsMaterial:' + material.uuid;\n      let pointsMaterial = this.cache.get(cacheKey);\n\n      if (!pointsMaterial) {\n        pointsMaterial = new _three.PointsMaterial();\n\n        _three.Material.prototype.copy.call(pointsMaterial, material);\n\n        pointsMaterial.color.copy(material.color);\n        pointsMaterial.map = material.map;\n        pointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n        this.cache.add(cacheKey, pointsMaterial);\n      }\n\n      material = pointsMaterial;\n    } else if (mesh.isLine) {\n      const cacheKey = 'LineBasicMaterial:' + material.uuid;\n      let lineMaterial = this.cache.get(cacheKey);\n\n      if (!lineMaterial) {\n        lineMaterial = new _three.LineBasicMaterial();\n\n        _three.Material.prototype.copy.call(lineMaterial, material);\n\n        lineMaterial.color.copy(material.color);\n        lineMaterial.map = material.map;\n        this.cache.add(cacheKey, lineMaterial);\n      }\n\n      material = lineMaterial;\n    } // Clone the material if it will be modified\n\n\n    if (useDerivativeTangents || useVertexColors || useFlatShading) {\n      let cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n      if (useDerivativeTangents) cacheKey += 'derivative-tangents:';\n      if (useVertexColors) cacheKey += 'vertex-colors:';\n      if (useFlatShading) cacheKey += 'flat-shading:';\n      let cachedMaterial = this.cache.get(cacheKey);\n\n      if (!cachedMaterial) {\n        cachedMaterial = material.clone();\n        if (useVertexColors) cachedMaterial.vertexColors = true;\n        if (useFlatShading) cachedMaterial.flatShading = true;\n\n        if (useDerivativeTangents) {\n          // https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n          if (cachedMaterial.normalScale) cachedMaterial.normalScale.y *= -1;\n          if (cachedMaterial.clearcoatNormalScale) cachedMaterial.clearcoatNormalScale.y *= -1;\n        }\n\n        this.cache.add(cacheKey, cachedMaterial);\n        this.associations.set(cachedMaterial, this.associations.get(material));\n      }\n\n      material = cachedMaterial;\n    }\n\n    mesh.material = material;\n  }\n\n  getMaterialType() {\n    return _three.MeshStandardMaterial;\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n   * @param {number} materialIndex\n   * @return {Promise<Material>}\n   */\n\n\n  loadMaterial(materialIndex) {\n    const parser = this;\n    const json = this.json;\n    const extensions = this.extensions;\n    const materialDef = json.materials[materialIndex];\n    let materialType;\n    const materialParams = {};\n    const materialExtensions = materialDef.extensions || {};\n    const pending = [];\n\n    if (materialExtensions[EXTENSIONS.KHR_MATERIALS_UNLIT]) {\n      const kmuExtension = extensions[EXTENSIONS.KHR_MATERIALS_UNLIT];\n      materialType = kmuExtension.getMaterialType();\n      pending.push(kmuExtension.extendParams(materialParams, materialDef, parser));\n    } else {\n      // Specification:\n      // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n      const metallicRoughness = materialDef.pbrMetallicRoughness || {};\n      materialParams.color = new _three.Color(1.0, 1.0, 1.0);\n      materialParams.opacity = 1.0;\n\n      if (Array.isArray(metallicRoughness.baseColorFactor)) {\n        const array = metallicRoughness.baseColorFactor;\n        materialParams.color.fromArray(array);\n        materialParams.opacity = array[3];\n      }\n\n      if (metallicRoughness.baseColorTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture, _three.sRGBEncoding));\n      }\n\n      materialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n      materialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n      if (metallicRoughness.metallicRoughnessTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture));\n        pending.push(parser.assignTexture(materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture));\n      }\n\n      materialType = this._invokeOne(function (ext) {\n        return ext.getMaterialType && ext.getMaterialType(materialIndex);\n      });\n      pending.push(Promise.all(this._invokeAll(function (ext) {\n        return ext.extendMaterialParams && ext.extendMaterialParams(materialIndex, materialParams);\n      })));\n    }\n\n    if (materialDef.doubleSided === true) {\n      materialParams.side = _three.DoubleSide;\n    }\n\n    const alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n    if (alphaMode === ALPHA_MODES.BLEND) {\n      materialParams.transparent = true; // See: https://github.com/mrdoob/three.js/issues/17706\n\n      materialParams.depthWrite = false;\n    } else {\n      materialParams.transparent = false;\n\n      if (alphaMode === ALPHA_MODES.MASK) {\n        materialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n      }\n    }\n\n    if (materialDef.normalTexture !== undefined && materialType !== _three.MeshBasicMaterial) {\n      pending.push(parser.assignTexture(materialParams, 'normalMap', materialDef.normalTexture));\n      materialParams.normalScale = new _three.Vector2(1, 1);\n\n      if (materialDef.normalTexture.scale !== undefined) {\n        const scale = materialDef.normalTexture.scale;\n        materialParams.normalScale.set(scale, scale);\n      }\n    }\n\n    if (materialDef.occlusionTexture !== undefined && materialType !== _three.MeshBasicMaterial) {\n      pending.push(parser.assignTexture(materialParams, 'aoMap', materialDef.occlusionTexture));\n\n      if (materialDef.occlusionTexture.strength !== undefined) {\n        materialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n      }\n    }\n\n    if (materialDef.emissiveFactor !== undefined && materialType !== _three.MeshBasicMaterial) {\n      materialParams.emissive = new _three.Color().fromArray(materialDef.emissiveFactor);\n    }\n\n    if (materialDef.emissiveTexture !== undefined && materialType !== _three.MeshBasicMaterial) {\n      pending.push(parser.assignTexture(materialParams, 'emissiveMap', materialDef.emissiveTexture, _three.sRGBEncoding));\n    }\n\n    return Promise.all(pending).then(function () {\n      const material = new materialType(materialParams);\n      if (materialDef.name) material.name = materialDef.name;\n      assignExtrasToUserData(material, materialDef);\n      parser.associations.set(material, {\n        materials: materialIndex\n      });\n      if (materialDef.extensions) addUnknownExtensionsToUserData(extensions, material, materialDef);\n      return material;\n    });\n  }\n  /** When Object3D instances are targeted by animation, they need unique names. */\n\n\n  createUniqueName(originalName) {\n    const sanitizedName = _three.PropertyBinding.sanitizeNodeName(originalName || '');\n\n    let name = sanitizedName;\n\n    for (let i = 1; this.nodeNamesUsed[name]; ++i) {\n      name = sanitizedName + '_' + i;\n    }\n\n    this.nodeNamesUsed[name] = true;\n    return name;\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n   *\n   * Creates BufferGeometries from primitives.\n   *\n   * @param {Array<GLTF.Primitive>} primitives\n   * @return {Promise<Array<BufferGeometry>>}\n   */\n\n\n  loadGeometries(primitives) {\n    const parser = this;\n    const extensions = this.extensions;\n    const cache = this.primitiveCache;\n\n    function createDracoPrimitive(primitive) {\n      return extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(primitive, parser).then(function (geometry) {\n        return addPrimitiveAttributes(geometry, primitive, parser);\n      });\n    }\n\n    const pending = [];\n\n    for (let i = 0, il = primitives.length; i < il; i++) {\n      const primitive = primitives[i];\n      const cacheKey = createPrimitiveKey(primitive); // See if we've already created this geometry\n\n      const cached = cache[cacheKey];\n\n      if (cached) {\n        // Use the cached geometry if it exists\n        pending.push(cached.promise);\n      } else {\n        let geometryPromise;\n\n        if (primitive.extensions && primitive.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]) {\n          // Use DRACO geometry if available\n          geometryPromise = createDracoPrimitive(primitive);\n        } else {\n          // Otherwise create a new geometry\n          geometryPromise = addPrimitiveAttributes(new _three.BufferGeometry(), primitive, parser);\n        } // Cache this geometry\n\n\n        cache[cacheKey] = {\n          primitive: primitive,\n          promise: geometryPromise\n        };\n        pending.push(geometryPromise);\n      }\n    }\n\n    return Promise.all(pending);\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n   * @param {number} meshIndex\n   * @return {Promise<Group|Mesh|SkinnedMesh>}\n   */\n\n\n  loadMesh(meshIndex) {\n    const parser = this;\n    const json = this.json;\n    const extensions = this.extensions;\n    const meshDef = json.meshes[meshIndex];\n    const primitives = meshDef.primitives;\n    const pending = [];\n\n    for (let i = 0, il = primitives.length; i < il; i++) {\n      const material = primitives[i].material === undefined ? createDefaultMaterial(this.cache) : this.getDependency('material', primitives[i].material);\n      pending.push(material);\n    }\n\n    pending.push(parser.loadGeometries(primitives));\n    return Promise.all(pending).then(function (results) {\n      const materials = results.slice(0, results.length - 1);\n      const geometries = results[results.length - 1];\n      const meshes = [];\n\n      for (let i = 0, il = geometries.length; i < il; i++) {\n        const geometry = geometries[i];\n        const primitive = primitives[i]; // 1. create Mesh\n\n        let mesh;\n        const material = materials[i];\n\n        if (primitive.mode === WEBGL_CONSTANTS.TRIANGLES || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN || primitive.mode === undefined) {\n          // .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n          mesh = meshDef.isSkinnedMesh === true ? new _three.SkinnedMesh(geometry, material) : new _three.Mesh(geometry, material);\n\n          if (mesh.isSkinnedMesh === true) {\n            // normalize skin weights to fix malformed assets (see #15319)\n            mesh.normalizeSkinWeights();\n          }\n\n          if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP) {\n            mesh.geometry = (0, _BufferGeometryUtils.toTrianglesDrawMode)(mesh.geometry, _three.TriangleStripDrawMode);\n          } else if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN) {\n            mesh.geometry = (0, _BufferGeometryUtils.toTrianglesDrawMode)(mesh.geometry, _three.TriangleFanDrawMode);\n          }\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINES) {\n          mesh = new _three.LineSegments(geometry, material);\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINE_STRIP) {\n          mesh = new _three.Line(geometry, material);\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINE_LOOP) {\n          mesh = new _three.LineLoop(geometry, material);\n        } else if (primitive.mode === WEBGL_CONSTANTS.POINTS) {\n          mesh = new _three.Points(geometry, material);\n        } else {\n          throw new Error('THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode);\n        }\n\n        if (Object.keys(mesh.geometry.morphAttributes).length > 0) {\n          updateMorphTargets(mesh, meshDef);\n        }\n\n        mesh.name = parser.createUniqueName(meshDef.name || 'mesh_' + meshIndex);\n        assignExtrasToUserData(mesh, meshDef);\n        if (primitive.extensions) addUnknownExtensionsToUserData(extensions, mesh, primitive);\n        parser.assignFinalMaterial(mesh);\n        meshes.push(mesh);\n      }\n\n      for (let i = 0, il = meshes.length; i < il; i++) {\n        parser.associations.set(meshes[i], {\n          meshes: meshIndex,\n          primitives: i\n        });\n      }\n\n      if (meshes.length === 1) {\n        return meshes[0];\n      }\n\n      const group = new _three.Group();\n      parser.associations.set(group, {\n        meshes: meshIndex\n      });\n\n      for (let i = 0, il = meshes.length; i < il; i++) {\n        group.add(meshes[i]);\n      }\n\n      return group;\n    });\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n   * @param {number} cameraIndex\n   * @return {Promise<THREE.Camera>}\n   */\n\n\n  loadCamera(cameraIndex) {\n    let camera;\n    const cameraDef = this.json.cameras[cameraIndex];\n    const params = cameraDef[cameraDef.type];\n\n    if (!params) {\n      console.warn('THREE.GLTFLoader: Missing camera parameters.');\n      return;\n    }\n\n    if (cameraDef.type === 'perspective') {\n      camera = new _three.PerspectiveCamera(_three.MathUtils.radToDeg(params.yfov), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6);\n    } else if (cameraDef.type === 'orthographic') {\n      camera = new _three.OrthographicCamera(-params.xmag, params.xmag, params.ymag, -params.ymag, params.znear, params.zfar);\n    }\n\n    if (cameraDef.name) camera.name = this.createUniqueName(cameraDef.name);\n    assignExtrasToUserData(camera, cameraDef);\n    return Promise.resolve(camera);\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n   * @param {number} skinIndex\n   * @return {Promise<Skeleton>}\n   */\n\n\n  loadSkin(skinIndex) {\n    const skinDef = this.json.skins[skinIndex];\n    const pending = [];\n\n    for (let i = 0, il = skinDef.joints.length; i < il; i++) {\n      pending.push(this._loadNodeShallow(skinDef.joints[i]));\n    }\n\n    if (skinDef.inverseBindMatrices !== undefined) {\n      pending.push(this.getDependency('accessor', skinDef.inverseBindMatrices));\n    } else {\n      pending.push(null);\n    }\n\n    return Promise.all(pending).then(function (results) {\n      const inverseBindMatrices = results.pop();\n      const jointNodes = results; // Note that bones (joint nodes) may or may not be in the\n      // scene graph at this time.\n\n      const bones = [];\n      const boneInverses = [];\n\n      for (let i = 0, il = jointNodes.length; i < il; i++) {\n        const jointNode = jointNodes[i];\n\n        if (jointNode) {\n          bones.push(jointNode);\n          const mat = new _three.Matrix4();\n\n          if (inverseBindMatrices !== null) {\n            mat.fromArray(inverseBindMatrices.array, i * 16);\n          }\n\n          boneInverses.push(mat);\n        } else {\n          console.warn('THREE.GLTFLoader: Joint \"%s\" could not be found.', skinDef.joints[i]);\n        }\n      }\n\n      return new _three.Skeleton(bones, boneInverses);\n    });\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n   * @param {number} animationIndex\n   * @return {Promise<AnimationClip>}\n   */\n\n\n  loadAnimation(animationIndex) {\n    const json = this.json;\n    const animationDef = json.animations[animationIndex];\n    const animationName = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n    const pendingNodes = [];\n    const pendingInputAccessors = [];\n    const pendingOutputAccessors = [];\n    const pendingSamplers = [];\n    const pendingTargets = [];\n\n    for (let i = 0, il = animationDef.channels.length; i < il; i++) {\n      const channel = animationDef.channels[i];\n      const sampler = animationDef.samplers[channel.sampler];\n      const target = channel.target;\n      const name = target.node;\n      const input = animationDef.parameters !== undefined ? animationDef.parameters[sampler.input] : sampler.input;\n      const output = animationDef.parameters !== undefined ? animationDef.parameters[sampler.output] : sampler.output;\n      if (target.node === undefined) continue;\n      pendingNodes.push(this.getDependency('node', name));\n      pendingInputAccessors.push(this.getDependency('accessor', input));\n      pendingOutputAccessors.push(this.getDependency('accessor', output));\n      pendingSamplers.push(sampler);\n      pendingTargets.push(target);\n    }\n\n    return Promise.all([Promise.all(pendingNodes), Promise.all(pendingInputAccessors), Promise.all(pendingOutputAccessors), Promise.all(pendingSamplers), Promise.all(pendingTargets)]).then(function (dependencies) {\n      const nodes = dependencies[0];\n      const inputAccessors = dependencies[1];\n      const outputAccessors = dependencies[2];\n      const samplers = dependencies[3];\n      const targets = dependencies[4];\n      const tracks = [];\n\n      for (let i = 0, il = nodes.length; i < il; i++) {\n        const node = nodes[i];\n        const inputAccessor = inputAccessors[i];\n        const outputAccessor = outputAccessors[i];\n        const sampler = samplers[i];\n        const target = targets[i];\n        if (node === undefined) continue;\n        node.updateMatrix();\n        let TypedKeyframeTrack;\n\n        switch (PATH_PROPERTIES[target.path]) {\n          case PATH_PROPERTIES.weights:\n            TypedKeyframeTrack = _three.NumberKeyframeTrack;\n            break;\n\n          case PATH_PROPERTIES.rotation:\n            TypedKeyframeTrack = _three.QuaternionKeyframeTrack;\n            break;\n\n          case PATH_PROPERTIES.position:\n          case PATH_PROPERTIES.scale:\n          default:\n            TypedKeyframeTrack = _three.VectorKeyframeTrack;\n            break;\n        }\n\n        const targetName = node.name ? node.name : node.uuid;\n        const interpolation = sampler.interpolation !== undefined ? INTERPOLATION[sampler.interpolation] : _three.InterpolateLinear;\n        const targetNames = [];\n\n        if (PATH_PROPERTIES[target.path] === PATH_PROPERTIES.weights) {\n          node.traverse(function (object) {\n            if (object.morphTargetInfluences) {\n              targetNames.push(object.name ? object.name : object.uuid);\n            }\n          });\n        } else {\n          targetNames.push(targetName);\n        }\n\n        let outputArray = outputAccessor.array;\n\n        if (outputAccessor.normalized) {\n          const scale = getNormalizedComponentScale(outputArray.constructor);\n          const scaled = new Float32Array(outputArray.length);\n\n          for (let j = 0, jl = outputArray.length; j < jl; j++) {\n            scaled[j] = outputArray[j] * scale;\n          }\n\n          outputArray = scaled;\n        }\n\n        for (let j = 0, jl = targetNames.length; j < jl; j++) {\n          const track = new TypedKeyframeTrack(targetNames[j] + '.' + PATH_PROPERTIES[target.path], inputAccessor.array, outputArray, interpolation); // Override interpolation with custom factory method.\n\n          if (sampler.interpolation === 'CUBICSPLINE') {\n            track.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline(result) {\n              // A CUBICSPLINE keyframe in glTF has three output values for each input value,\n              // representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n              // must be divided by three to get the interpolant's sampleSize argument.\n              const interpolantType = this instanceof _three.QuaternionKeyframeTrack ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n              return new interpolantType(this.times, this.values, this.getValueSize() / 3, result);\n            }; // Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\n\n            track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n          }\n\n          tracks.push(track);\n        }\n      }\n\n      return new _three.AnimationClip(animationName, undefined, tracks);\n    });\n  }\n\n  createNodeMesh(nodeIndex) {\n    const json = this.json;\n    const parser = this;\n    const nodeDef = json.nodes[nodeIndex];\n    if (nodeDef.mesh === undefined) return null;\n    return parser.getDependency('mesh', nodeDef.mesh).then(function (mesh) {\n      const node = parser._getNodeRef(parser.meshCache, nodeDef.mesh, mesh); // if weights are provided on the node, override weights on the mesh.\n\n\n      if (nodeDef.weights !== undefined) {\n        node.traverse(function (o) {\n          if (!o.isMesh) return;\n\n          for (let i = 0, il = nodeDef.weights.length; i < il; i++) {\n            o.morphTargetInfluences[i] = nodeDef.weights[i];\n          }\n        });\n      }\n\n      return node;\n    });\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n   * @param {number} nodeIndex\n   * @return {Promise<Object3D>}\n   */\n\n\n  loadNode(nodeIndex) {\n    const json = this.json;\n    const parser = this;\n    const nodeDef = json.nodes[nodeIndex];\n\n    const nodePending = parser._loadNodeShallow(nodeIndex);\n\n    const childPending = [];\n    const childrenDef = nodeDef.children || [];\n\n    for (let i = 0, il = childrenDef.length; i < il; i++) {\n      childPending.push(parser.getDependency('node', childrenDef[i]));\n    }\n\n    const skeletonPending = nodeDef.skin === undefined ? Promise.resolve(null) : parser.getDependency('skin', nodeDef.skin);\n    return Promise.all([nodePending, Promise.all(childPending), skeletonPending]).then(function (results) {\n      const node = results[0];\n      const children = results[1];\n      const skeleton = results[2];\n\n      if (skeleton !== null) {\n        // This full traverse should be fine because\n        // child glTF nodes have not been added to this node yet.\n        node.traverse(function (mesh) {\n          if (!mesh.isSkinnedMesh) return;\n          mesh.bind(skeleton, _identityMatrix);\n        });\n      }\n\n      for (let i = 0, il = children.length; i < il; i++) {\n        node.add(children[i]);\n      }\n\n      return node;\n    });\n  } // ._loadNodeShallow() parses a single node.\n  // skin and child nodes are created and added in .loadNode() (no '_' prefix).\n\n\n  _loadNodeShallow(nodeIndex) {\n    const json = this.json;\n    const extensions = this.extensions;\n    const parser = this; // This method is called from .loadNode() and .loadSkin().\n    // Cache a node to avoid duplication.\n\n    if (this.nodeCache[nodeIndex] !== undefined) {\n      return this.nodeCache[nodeIndex];\n    }\n\n    const nodeDef = json.nodes[nodeIndex]; // reserve node's name before its dependencies, so the root has the intended name.\n\n    const nodeName = nodeDef.name ? parser.createUniqueName(nodeDef.name) : '';\n    const pending = [];\n\n    const meshPromise = parser._invokeOne(function (ext) {\n      return ext.createNodeMesh && ext.createNodeMesh(nodeIndex);\n    });\n\n    if (meshPromise) {\n      pending.push(meshPromise);\n    }\n\n    if (nodeDef.camera !== undefined) {\n      pending.push(parser.getDependency('camera', nodeDef.camera).then(function (camera) {\n        return parser._getNodeRef(parser.cameraCache, nodeDef.camera, camera);\n      }));\n    }\n\n    parser._invokeAll(function (ext) {\n      return ext.createNodeAttachment && ext.createNodeAttachment(nodeIndex);\n    }).forEach(function (promise) {\n      pending.push(promise);\n    });\n\n    this.nodeCache[nodeIndex] = Promise.all(pending).then(function (objects) {\n      let node; // .isBone isn't in glTF spec. See ._markDefs\n\n      if (nodeDef.isBone === true) {\n        node = new _three.Bone();\n      } else if (objects.length > 1) {\n        node = new _three.Group();\n      } else if (objects.length === 1) {\n        node = objects[0];\n      } else {\n        node = new _three.Object3D();\n      }\n\n      if (node !== objects[0]) {\n        for (let i = 0, il = objects.length; i < il; i++) {\n          node.add(objects[i]);\n        }\n      }\n\n      if (nodeDef.name) {\n        node.userData.name = nodeDef.name;\n        node.name = nodeName;\n      }\n\n      assignExtrasToUserData(node, nodeDef);\n      if (nodeDef.extensions) addUnknownExtensionsToUserData(extensions, node, nodeDef);\n\n      if (nodeDef.matrix !== undefined) {\n        const matrix = new _three.Matrix4();\n        matrix.fromArray(nodeDef.matrix);\n        node.applyMatrix4(matrix);\n      } else {\n        if (nodeDef.translation !== undefined) {\n          node.position.fromArray(nodeDef.translation);\n        }\n\n        if (nodeDef.rotation !== undefined) {\n          node.quaternion.fromArray(nodeDef.rotation);\n        }\n\n        if (nodeDef.scale !== undefined) {\n          node.scale.fromArray(nodeDef.scale);\n        }\n      }\n\n      if (!parser.associations.has(node)) {\n        parser.associations.set(node, {});\n      }\n\n      parser.associations.get(node).nodes = nodeIndex;\n      return node;\n    });\n    return this.nodeCache[nodeIndex];\n  }\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n   * @param {number} sceneIndex\n   * @return {Promise<Group>}\n   */\n\n\n  loadScene(sceneIndex) {\n    const extensions = this.extensions;\n    const sceneDef = this.json.scenes[sceneIndex];\n    const parser = this; // Loader returns Group, not Scene.\n    // See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\n    const scene = new _three.Group();\n    if (sceneDef.name) scene.name = parser.createUniqueName(sceneDef.name);\n    assignExtrasToUserData(scene, sceneDef);\n    if (sceneDef.extensions) addUnknownExtensionsToUserData(extensions, scene, sceneDef);\n    const nodeIds = sceneDef.nodes || [];\n    const pending = [];\n\n    for (let i = 0, il = nodeIds.length; i < il; i++) {\n      pending.push(parser.getDependency('node', nodeIds[i]));\n    }\n\n    return Promise.all(pending).then(function (nodes) {\n      for (let i = 0, il = nodes.length; i < il; i++) {\n        scene.add(nodes[i]);\n      } // Removes dangling associations, associations that reference a node that\n      // didn't make it into the scene.\n\n\n      const reduceAssociations = node => {\n        const reducedAssociations = new Map();\n\n        for (const [key, value] of parser.associations) {\n          if (key instanceof _three.Material || key instanceof _three.Texture) {\n            reducedAssociations.set(key, value);\n          }\n        }\n\n        node.traverse(node => {\n          const mappings = parser.associations.get(node);\n\n          if (mappings != null) {\n            reducedAssociations.set(node, mappings);\n          }\n        });\n        return reducedAssociations;\n      };\n\n      parser.associations = reduceAssociations(scene);\n      return scene;\n    });\n  }\n\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\n\n\nfunction computeBounds(geometry, primitiveDef, parser) {\n  const attributes = primitiveDef.attributes;\n  const box = new _three.Box3();\n\n  if (attributes.POSITION !== undefined) {\n    const accessor = parser.json.accessors[attributes.POSITION];\n    const min = accessor.min;\n    const max = accessor.max; // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n    if (min !== undefined && max !== undefined) {\n      box.set(new _three.Vector3(min[0], min[1], min[2]), new _three.Vector3(max[0], max[1], max[2]));\n\n      if (accessor.normalized) {\n        const boxScale = getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[accessor.componentType]);\n        box.min.multiplyScalar(boxScale);\n        box.max.multiplyScalar(boxScale);\n      }\n    } else {\n      console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.');\n      return;\n    }\n  } else {\n    return;\n  }\n\n  const targets = primitiveDef.targets;\n\n  if (targets !== undefined) {\n    const maxDisplacement = new _three.Vector3();\n    const vector = new _three.Vector3();\n\n    for (let i = 0, il = targets.length; i < il; i++) {\n      const target = targets[i];\n\n      if (target.POSITION !== undefined) {\n        const accessor = parser.json.accessors[target.POSITION];\n        const min = accessor.min;\n        const max = accessor.max; // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n        if (min !== undefined && max !== undefined) {\n          // we need to get max of absolute components because target weight is [-1,1]\n          vector.setX(Math.max(Math.abs(min[0]), Math.abs(max[0])));\n          vector.setY(Math.max(Math.abs(min[1]), Math.abs(max[1])));\n          vector.setZ(Math.max(Math.abs(min[2]), Math.abs(max[2])));\n\n          if (accessor.normalized) {\n            const boxScale = getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[accessor.componentType]);\n            vector.multiplyScalar(boxScale);\n          } // Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n          // to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n          // are used to implement key-frame animations and as such only two are active at a time - this results in very large\n          // boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\n\n          maxDisplacement.max(vector);\n        } else {\n          console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.');\n        }\n      }\n    } // As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\n\n    box.expandByVector(maxDisplacement);\n  }\n\n  geometry.boundingBox = box;\n  const sphere = new _three.Sphere();\n  box.getCenter(sphere.center);\n  sphere.radius = box.min.distanceTo(box.max) / 2;\n  geometry.boundingSphere = sphere;\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\n\n\nfunction addPrimitiveAttributes(geometry, primitiveDef, parser) {\n  const attributes = primitiveDef.attributes;\n  const pending = [];\n\n  function assignAttributeAccessor(accessorIndex, attributeName) {\n    return parser.getDependency('accessor', accessorIndex).then(function (accessor) {\n      geometry.setAttribute(attributeName, accessor);\n    });\n  }\n\n  for (const gltfAttributeName in attributes) {\n    const threeAttributeName = ATTRIBUTES[gltfAttributeName] || gltfAttributeName.toLowerCase(); // Skip attributes already provided by e.g. Draco extension.\n\n    if (threeAttributeName in geometry.attributes) continue;\n    pending.push(assignAttributeAccessor(attributes[gltfAttributeName], threeAttributeName));\n  }\n\n  if (primitiveDef.indices !== undefined && !geometry.index) {\n    const accessor = parser.getDependency('accessor', primitiveDef.indices).then(function (accessor) {\n      geometry.setIndex(accessor);\n    });\n    pending.push(accessor);\n  }\n\n  assignExtrasToUserData(geometry, primitiveDef);\n  computeBounds(geometry, primitiveDef, parser);\n  return Promise.all(pending).then(function () {\n    return primitiveDef.targets !== undefined ? addMorphTargets(geometry, primitiveDef.targets, parser) : geometry;\n  });\n}\n};"],
"names":["shadow$provide","global","require","module","exports","GLTFRegistry","objects","get","key","add","object","remove","removeAll","createDefaultMaterial","cache","undefined","_three","MeshStandardMaterial","color","emissive","metalness","roughness","transparent","depthTest","side","FrontSide","addUnknownExtensionsToUserData","knownExtensions","objectDef","name","extensions","userData","gltfExtensions","assignExtrasToUserData","gltfDef","extras","Object","assign","console","warn","addMorphTargets","geometry","targets","parser","hasMorphPosition","hasMorphNormal","hasMorphColor","i","il","length","target","POSITION","NORMAL","COLOR_0","Promise","resolve","pendingPositionAccessors","pendingNormalAccessors","pendingColorAccessors","pendingAccessor","getDependency","attributes","position","push","normal","all","then","accessors","morphPositions","morphNormals","morphColors","morphAttributes","morphTargetsRelative","createPrimitiveKey","primitiveDef","dracoExtension","EXTENSIONS","KHR_DRACO_MESH_COMPRESSION","geometryKey","bufferView","indices","createAttributesKey","mode","attributesKey","keys","sort","getNormalizedComponentScale","constructor","Int8Array","Uint8Array","Int16Array","Uint16Array","Error","computeBounds","box","Box3","accessor","json","min","max","set","Vector3","normalized","boxScale","WEBGL_COMPONENT_TYPES","componentType","multiplyScalar","maxDisplacement","vector","setX","Math","abs","setY","setZ","expandByVector","boundingBox","sphere","Sphere","getCenter","center","radius","distanceTo","boundingSphere","addPrimitiveAttributes","assignAttributeAccessor","accessorIndex","attributeName","setAttribute","pending","gltfAttributeName","threeAttributeName","ATTRIBUTES","toLowerCase","index","setIndex","defineProperty","value","GLTFLoader","_BufferGeometryUtils","Loader","manager","meshoptDecoder","ktx2Loader","dracoLoader","pluginCallbacks","register","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFTextureAVIFExtension","GLTFMaterialsSheenExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsEmissiveStrengthExtension","GLTFMaterialsSpecularExtension","GLTFMaterialsIridescenceExtension","GLTFLightsExtension","GLTFMeshoptCompression","GLTFMeshGpuInstancing","load","url","onLoad","onProgress","onError","scope","resourcePath","path","LoaderUtils","extractUrlBase","itemStart","_onError","e","error","itemError","itemEnd","loader","FileLoader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","data","parse","gltf","setDRACOLoader","setDDSLoader","setKTX2Loader","setMeshoptDecoder","callback","indexOf","unregister","splice","plugins","textDecoder","TextDecoder","JSON","ArrayBuffer","BINARY_EXTENSION_HEADER_MAGIC","decode","magic","KHR_BINARY_GLTF","GLTFBinaryExtension","content","asset","version","GLTFParser","crossOrigin","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","parseAsync","reject","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_IOR","KHR_MATERIALS_SHEEN","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_IRIDESCENCE","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","KHR_MATERIALS_EMISSIVE_STRENGTH","EXT_TEXTURE_WEBP","EXT_TEXTURE_AVIF","EXT_MESHOPT_COMPRESSION","EXT_MESH_GPU_INSTANCING","refs","uses","_markDefs","nodeDefs","nodes","nodeIndex","nodeLength","nodeDef","light","_addNodeRef","_loadLight","lightIndex","cacheKey","dependency","lightDef","lights","Color","fromArray","range","type","lightNode","DirectionalLight","PointLight","distance","SpotLight","spot","innerConeAngle","outerConeAngle","PI","angle","penumbra","decay","intensity","createUniqueName","createNodeAttachment","self","_getNodeRef","getMaterialType","MeshBasicMaterial","extendParams","materialParams","materialDef","opacity","metallicRoughness","pbrMetallicRoughness","Array","isArray","baseColorFactor","array","baseColorTexture","assignTexture","sRGBEncoding","extendMaterialParams","materialIndex","materials","emissiveStrength","emissiveIntensity","MeshPhysicalMaterial","extension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","scale","clearcoatNormalScale","Vector2","iridescenceFactor","iridescence","iridescenceTexture","iridescenceIor","iridescenceIOR","iridescenceThicknessRange","iridescenceThicknessMinimum","iridescenceThicknessMaximum","iridescenceThicknessTexture","sheenColor","sheenRoughness","sheen","sheenColorFactor","sheenRoughnessFactor","sheenColorTexture","sheenRoughnessTexture","transmissionFactor","transmission","transmissionTexture","thickness","thicknessFactor","thicknessTexture","attenuationDistance","Infinity","colorArray","attenuationColor","ior","specularIntensity","specularFactor","specularTexture","specularColorFactor","specularColor","specularColorTexture","loadTexture","textureIndex","textureDef","textures","options","loadTextureImage","source","isSupported","images","textureLoader","uri","handler","getHandler","detectSupport","image","Image","src","onload","onerror","image.onerror","height","loadBufferView","bufferViews","extensionDef","buffer","decoder","supported","res","count","stride","byteStride","byteOffset","byteLength","decodeGltfBufferAsync","filter","ready","result","decodeGltfBuffer","createNodeMesh","mesh","meshDef","meshes","primitive","primitives","WEBGL_CONSTANTS","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","attributesDef","results","nodeObject","pop","isGroup","children","instancedMeshes","m","Matrix4","p","q","Quaternion","s","instancedMesh","InstancedMesh","material","TRANSLATION","fromBufferAttribute","ROTATION","SCALE","setMatrixAt","compose","Object3D","prototype","copy","call","assignFinalMaterial","clear","body","headerView","DataView","BINARY_EXTENSION_HEADER_LENGTH","header","slice","getUint32","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","BIN","preload","decodePrimitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","accessorDef","decodeDracoFile","attribute","extendTexture","texture","transform","texCoord","channel","offset","rotation","clone","repeat","needsUpdate","GLTFCubicSplineInterpolant","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","copySampleValue_","values","valueSize","interpolate_","i1","t0","t","t1","stride2","stride3","td","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","p1","_q","GLTFCubicSplineQuaternionInterpolant","normalize","toArray","FLOAT","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","UNSIGNED_BYTE","UNSIGNED_SHORT","Uint32Array","Float32Array","WEBGL_FILTERS","NearestFilter","LinearFilter","NearestMipmapNearestFilter","LinearMipmapNearestFilter","NearestMipmapLinearFilter","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","ClampToEdgeWrapping","MirroredRepeatWrapping","RepeatWrapping","WEBGL_TYPE_SIZES","TANGENT","TEXCOORD_0","TEXCOORD_1","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","InterpolateLinear","STEP","InterpolateDiscrete","_identityMatrix","associations","Map","primitiveCache","nodeCache","meshCache","cameraCache","lightCache","sourceCache","textureCache","nodeNamesUsed","isFirefox","isSafari","firefoxVersion","navigator","test","userAgent","match","createImageBitmap","TextureLoader","ImageBitmapLoader","setCrossOrigin","_invokeAll","ext","beforeRoot","getDependencies","dependencies","scene","scenes","animations","cameras","afterRoot","catch","skinDefs","skins","meshDefs","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","camera","ref","updateMappings","original","mappings","child","entries","_invokeOne","func","unshift","loadScene","loadNode","loadMesh","loadAccessor","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","map","def","bufferIndex","bufferDef","buffers","resolveURL","bufferViewDef","sparse","itemSize","TypedArray","BufferAttribute","pendingBufferViews","elementBytes","BYTES_PER_ELEMENT","ibSlice","floor","ibCacheKey","ib","InterleavedBuffer","bufferAttribute","InterleavedBufferAttribute","byteOffsetValues","sparseIndices","TypedArrayIndices","SCALAR","sparseValues","setW","sourceIndex","sourceDef","sampler","promise","loadImageSource","flipY","startsWith","samplers","magFilter","minFilter","wrapS","wrapT","URL","webkitURL","sourceURI","isObjectURL","blob","Blob","mimeType","createObjectURL","isImageBitmapLoader","imageBitmap","Texture","revokeObjectURL","search","mapName","mapDef","encoding","gltfReference","useDerivativeTangents","tangent","useVertexColors","useFlatShading","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","vertexColors","flatShading","normalScale","y","materialType","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","DoubleSide","alphaMode","OPAQUE","BLEND","depthWrite","MASK","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","aoMapIntensity","emissiveFactor","emissiveTexture","originalName","sanitizedName","PropertyBinding","sanitizeNodeName","loadGeometries","createDracoPrimitive","cached","geometryPromise","BufferGeometry","meshIndex","geometries","SkinnedMesh","Mesh","normalizeSkinWeights","toTrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LineSegments","Line","LineLoop","Points","updateMorphTargets","morphTargetInfluences","targetNames","morphTargetDictionary","group","Group","cameraIndex","cameraDef","params","PerspectiveCamera","MathUtils","radToDeg","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","_loadNodeShallow","inverseBindMatrices","bones","boneInverses","jointNode","mat","Skeleton","animationIndex","animationDef","animationName","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","input","parameters","output","node","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","updateMatrix","TypedKeyframeTrack","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","interpolation","traverse","outputArray","scaled","j","jl","track","createInterpolant","track.createInterpolant","interpolantType","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","o","isMesh","nodePending","childPending","childrenDef","skeletonPending","skeleton","bind","nodeName","meshPromise","forEach","Bone","matrix","applyMatrix4","quaternion","has","sceneIndex","sceneDef","nodeIds","reduceAssociations","reducedAssociations"]
}
