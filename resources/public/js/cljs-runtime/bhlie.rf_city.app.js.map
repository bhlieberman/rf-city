{"version":3,"sources":["bhlie/rf_city/app.cljs"],"mappings":";;AAWA,GAAA,QAAAA,kCAAAC,0CAAAC,8CAAAC;AAAA;AAAA,AAAA,AAASC,yBAAK,AAACC,gDAAW,oBAAA,pBAACC;;AAE3B,sCAAA,tCAAMC;AAAN,AACE,YAAA,ZAAMC;;AACN,OAACC,iCAAOC,gCAAY,WAAKC;AAAL,AAAgB,oBAAMA;AAAN,AAAgB,8BAAA,mFAAA,1GAACC,6KAAyBD;;AAA1C;;GAApC,2CAAA,sEAAA;;AAGF,wBAAA,gCAAAE,xDAAMI;AAAN,AAAA,IAAAH,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;aAAA,AAAAE,4CAAAF,eAAA,pEAAmBI;AAAnB,AAAA,0FAAA,mDAAA,2CAAA,kDAAA,yEAAA,mFAAA,kDAGI,iBAAAC,qBAAA,8CAAAC;AAAA,AAAA,YAAAC,kBAAA,KAAA;AAAA,AAAA,IAAAD,eAAAA;;AAAA,AAAA,IAAAE,qBAAA,AAAAC,cAAAH;AAAA,AAAA,GAAAE;AAAA,AAAA,IAAAF,eAAAE;AAAA,AAAA,GAAA,AAAAE,6BAAAJ;AAAA,IAAAK,kBAu7E+C,AAAAqC,sBAAA1C;IAv7E/CM,qBAAA,AAAAC,gBAAAF;IAAAG,WAAA,AAAAC,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAI,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAJ;AAAA,iBAAA,AAAAK,eAAAN,gBAAAK,5CAAMU;AAAN,AAAA,IACkBE,QAAM,AAACC,0BAAiBzB,OAAOsB;IAC/BI,OAAK,AAAA,4FAAA,AAAA,mFAAIF;AAF3B,AAAA,AAAA,AAAAV,uBAAAJ,SAAA,mFAAA,gDAAA,2CAAA,kDAAA,kEAAA,uEAAA,mFAAA,gDAAA,2CAAA,jMAG6BY,sPACf,AAACK,wDAAKL,oBAAaI;;AAJjC,eAAA,CAAAd,WAAA;;;;AAAA;;;;;AAAA,OAAAG,qBAAA,AAAAC,gBAAAN,UAAA,AAAAO,oCAAA,AAAAC,qBAAAhB;;AAAA,OAAAa,qBAAA,AAAAC,gBAAAN,UAAA;;;AAAA,iBAAA,AAAAS,gBAAAjB,7BAAMoB;AAAN,AAAA,IACkBE,QAAM,AAACC,0BAAiBzB,OAAOsB;IAC/BI,OAAK,AAAA,4FAAA,AAAA,mFAAIF;AAF3B,AAAA,OAAAJ,eAAA,mFAAA,gDAAA,2CAAA,kDAAA,kEAAA,uEAAA,mFAAA,gDAAA,2CAAA,sJAAA,AAAAH,oCAAA,AAAAI,eAAAnB,1YAG6BoB,sPACf,AAACK,wDAAKL,oBAAaI;;;AAJjC;;;;GAAA,KAAA;;AAAA,AAAA,OAAAzB,mBAAiB,AAACsB,wBAAevB;;;AAMrC,qCAAA,6CAAA4B,lFAAME;AAAN,AAAA,IAAAD,aAAAD;IAAAC,iBAAA,AAAAhC,4BAAAgC;aAAA,AAAA/B,4CAAA+B,eAAA,pEAAgC7B;AAAhC,AACE,oBAAA,AAAA+B,hBAAMC,gCAAe,sDAAA,mFAAA,zIAACC;AAAtB,AAAA,0FAAA,mDAAA,yGAAA,2CAAA,gEAAA,jIAEIlC,0HAAaC,8EAAsBgC,8BACpC,iCAAA,AAAA,iRAAA,hSAAMA,kGACH,AAAA,mFAAA,AAAA,mFAAIA;;AAEZ,+BAAA,/BAAuBE;AAAvB,AACE,AAACC;;AACD,OAASjD,8BAAK,sDAAA,sHAAA,2CAAA,vNAACkD,yIAAcN,uIAA0BtC;;AAGzD,yBAAA,zBAAM6C;AAAN,AACE,4BAAA,mFAAA,/GAACC;;AACD,8BAAA,mFAAA,2CAAA,5JAACC,sOAAsC,WAAKC;AAAL,AAAc,OAAA,+FAAaA;GAAlE,qEACkC,WAAKA;AAAL,AAAc,8DAAA,mFAAA,iEAAA,3MAACC,+CAAOD;GADxD,qEAEoC,WAAKA,QAAQE;AAAb,AAAuB,kCAAA,mFAAA,iEAAA,/KAACC,mBAASH,qOAAkCE;;;AACvG,AAACrD;;AACD,OAAC6C","names":["js/bhlie","js/bhlie.rf-city","js/bhlie.rf-city.app","js/bhlie.rf-city.app.root","bhlie.rf-city.app/root","js/module$node_modules$react_dom$client.createRoot","goog.dom/getElement","bhlie.rf-city.app/init-routes!","js/console","reitit.frontend.easy/start!","bhlie.rf-city.views/city-router","new-match","re-frame.core/dispatch","p__33358","map__33359","cljs.core/--destructure-map","cljs.core.get","bhlie.rf-city.app/nav","router","iter__5523__auto__","s__33364","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__33366","cljs.core/chunk-buffer","i__33365","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__33363","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","route-name","reitit.core/route-names","route","reitit.core/match-by-name","text","reitit.frontend.easy.href","p__33376","map__33377","bhlie.rf-city.app/router-component","cljs.core/deref","current-route","re_frame.core.subscribe","bhlie.rf-city.app/mount-root","re-frame.core/clear-subscription-cache!","reagent.core.as_element","bhlie.rf-city.app/init","re-frame.core/dispatch-sync","re-chain.core/configure!","effects","cljs.core.get_in","dispatch","cljs.core/assoc-in","cljs.core/chunk-first"],"sourcesContent":["(ns bhlie.rf-city.app\n  (:require [re-frame.core :as re-frame :refer [dispatch]]\n            [reagent.core :as r]\n            [goog.dom :as gdom]\n            [bhlie.rf-city.events]\n            [re-chain.core :as chain]\n            [bhlie.rf-city.views :refer [city-router home]]\n            [reitit.core :as rc]\n            [reitit.frontend.easy :as rfe :refer [start! href]]\n            [\"react-dom/client\" :refer [createRoot]]))\n\n(defonce root (createRoot (gdom/getElement \"app\")))\n\n(defn init-routes! []\n  (.log js/console \"initializing routes\")\n  (start! city-router (fn [new-match] (when new-match (dispatch [:app/navigated new-match])))\n          {:use-fragment false}))\n\n(defn nav [{:keys [router]}]\n  [:div {:id :top-banner}\n   [:ul\n    (for [route-name (rc/route-names router)\n          :let       [route (rc/match-by-name router route-name)\n                      text (-> route :data :link-text)]]\n      [:li {:id :route-link :key route-name}\n       [:a {:href (href route-name)} text]])]])\n\n(defn router-component [{:keys [router]}]\n  (let [current-route @(re-frame/subscribe [:app/current-route])]\n    [:div\n     [nav {:router router :current-route current-route}]\n     (when current-route\n       [(-> current-route :data :view)])]))\n\n(defn ^:dev/after-load mount-root []\n  (re-frame/clear-subscription-cache!) \n  (.render root (r/as-element [router-component {:router city-router}])))\n\n#_{:clj-kondo/ignore [:clojure-lsp/unused-public-var]}\n(defn init []\n  (re-frame/dispatch-sync [:config/initialize-app])\n  (chain/configure! [{:effect-present?   (fn [effects] (:http-xhrio effects))\n                      :get-dispatch (fn [effects] (get-in effects [:http-xhrio :on-success]))\n                      :set-dispatch   (fn [effects dispatch] (assoc-in effects [:http-xhrio :on-success] dispatch))}])\n  (init-routes!)\n  (mount-root))"]}