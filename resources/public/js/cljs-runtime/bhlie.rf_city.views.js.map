{"version":3,"sources":["bhlie/rf_city/views.cljs"],"mappings":"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","names":["bhlie.rf-city.views/get-city-info","fork.re-frame/form","e","re-frame.core/dispatch","p__41668","map__41669","cljs.core/--destructure-map","cljs.core.get","values","form-id","handle-change","handle-blur","submitting?","handle-submit","reagent-mui.material.text-field/text-field","reagent-mui.material.button/button","bhlie.rf-city.views/gmap-inner","map__41670","lat","lon","reagent.core/props","reagent.core/current-component","reagent.core.create_class","_","canvas","goog.dom/getElement","js/parseFloat","bhlie.rf-city.views/gmap-outer","cljs.core/deref","pos","re_frame.core.subscribe","bhlie.rf-city.views/webgl-map-inner","map__41671","bhlie.rf-city.views/webgl-map-outer","bhlie.rf-city.views/tab-panel","props","map__41672","children","value","index","cljs.core.not_EQ_","cljs.core._EQ_","reagent-mui.material.box/box","reagent-mui.material.typography/typography","bhlie.rf-city.views/map-tile","reagent.core.atom","new-val","cljs.core/reset!","reagent-mui.material.tabs/tabs","reagent-mui.material.tab/tab","bhlie.rf-city.views/city-tile","map__41673","display_name","err","js/Error","or__5045__auto__","bhlie.rf-city.views/movies-tile","movies","cljs.core.into","iter__5523__auto__","s__41675","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__41677","cljs.core/chunk-buffer","i__41676","map__41678","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__41674","cljs.core/chunk-rest","map__41679","cljs.core/first","cljs.core/cons","cljs.core/rest","title","release_date","popularity","bhlie.rf-city.views/weather-tile","weather","s__41681","b__41683","i__41682","map__41684","iter__41680","map__41685","min_temp","max_temp","datetime","desc","bhlie.rf-city.views/current-location","bhlie.rf-city.views/home","bhlie.rf-city.views/city-router","reitit.frontend.router","cljs.core/chunk-first"],"sourcesContent":["(ns bhlie.rf-city.views\n  #_{:clj-kondo/ignore [:unused-namespace]}\n\n  (:require [bhlie.rf-city.subs]\n            [re-frame.core :as re-frame :refer [subscribe dispatch]]\n            [reagent.core :as r]\n            [fork.re-frame :as fork]\n            [goog.dom :as gdom]\n            [reitit.frontend :refer [router]]\n            [reagent-mui.material.button :refer [button]]\n            [reagent-mui.material.form-control :refer   #_{:clj-kondo/ignore [:unused-referred-var]} [form-control]]\n            [reagent-mui.material.text-field :refer [text-field]]\n            [reagent-mui.material.tabs :refer [tabs]]\n            [reagent-mui.material.tab :refer [tab]]\n            [reagent-mui.material.box :refer [box]]\n            [reagent-mui.material.typography :refer [typography]]\n            [reagent-mui.x.date-picker :refer    #_{:clj-kondo/ignore [:unused-referred-var]}[date-picker]]\n            [reagent-mui.x.localization-provider :refer   #_{:clj-kondo/ignore [:unused-referred-var]}[localization-provider]]\n            [reagent-mui.cljs-time-adapter :refer   #_{:clj-kondo/ignore [:unused-referred-var]}[cljs-time-adapter]]))\n\n(defn get-city-info []\n  [:div {:id :user-info-entry}\n   [fork/form {:form-id \"map-lookup\"\n               :path [:map-lookup]\n               :prevent-default? true\n               :clean-on-unmount? true\n               :on-submit (fn [e] (dispatch [:app/handle-form-submission e])\n                            (dispatch [:events/push-state :maps]))}\n    (fn [{:keys [values form-id handle-change handle-blur submitting?\n                 handle-submit]}]\n      [:form {:name :travel-info\n              :id form-id\n              :on-submit handle-submit\n              :class :form-entry}\n       [text-field {:id :destination\n                    :required true\n                    :name \"destination\"\n                    :value (values \"destination\")\n                    :type \"textarea\"\n                    :on-change handle-change\n                    :on-blur handle-blur\n                    :placeholder \"Destination\"\n                    :variant \"outlined\"}]\n       #_[:label {:id :from-label} \"From: \"\n        [localization-provider {:date-adapter cljs-time-adapter}\n         [date-picker {:id :date-from\n                       :disablePast true}]]]\n       #_[:label {:id :to-label} \"To: \"\n        [localization-provider {:id :date-from\n                                :date-adapter cljs-time-adapter}\n         [date-picker {:id :date-to\n                       :type \"date\"}]]]\n       [button {:variant \"contained\" :color \"primary\" :id :submit-search\n                :disabled submitting?} \"Search\"]])]])\n\n(defn gmap-inner []\n  (let [{:keys [lat lon]} (r/props (r/current-component))]\n    (r/create-class {:reagent-render (fn [] [:div\n                                             [:div#map-canvas {:style {:height \"400px\"}}]])\n                     :component-did-mount (fn [_] (let [canvas (gdom/getElement \"map-canvas\")]\n                                                    (dispatch [:config/load-google-maps {:canvas canvas\n                                                                                         :lat (js/parseFloat lat)\n                                                                                         :lon (js/parseFloat lon)\n                                                                                         :zoom 13}])))})))\n\n(defn gmap-outer []\n  (let [pos @(subscribe [:geo/live-map-coords])]\n    (fn [] [gmap-inner pos])))\n\n(defn webgl-map-inner []\n  (let [{:keys [lat lon]} (r/props (r/current-component))]\n    (r/create-class {:reagent-render (fn [] [:div\n                                             [:div#gl-map-canvas {:style {:height \"700px\" :width \"500px\"}}]])\n                     :component-did-mount (fn [_] (let [canvas (gdom/getElement \"gl-map-canvas\")]\n                                                    (dispatch [:config/load-google-maps {:canvas canvas\n                                                                                    :lat (js/parseFloat lat)\n                                                                                    :lon (js/parseFloat lon)\n                                                                                    :zoom 18}])))})))\n\n(defn webgl-map-outer []\n  (let [pos @(subscribe [:geo/live-map-coords])]\n    (fn [] [webgl-map-inner pos])))\n\n(defn tab-panel [props]\n  (let [{:keys [children value index]} props]\n    [:div {:role :tabpanel\n           :hidden (not= value index)\n           :id (str \"simple-tabpanel-\" index)\n           :aria-labelledby (str \"simple-tab-\" index)}\n     (when (= value index) [box {:sx {:p 3}}\n                            [typography children]])]))\n\n(defn map-tile []\n  (let [value (r/atom 0)\n        handle-change (fn [_ new-val] (reset! value new-val))]\n    (fn []\n      [:div {:id :map-container}\n      [box {:sx {:width \"100%\"}}\n       [box {:sx {:border-bottom 1 :border-color :divider}}\n        [tabs {:value @value :on-change handle-change :id :map-tabs}\n         [tab {:label :static}]\n         [tab {:label :google-maps}]\n         [tab {:label :webgl-map}]]]\n       [tab-panel {:value @value \n                   :index 0 \n                   :children [:img {:src @(subscribe [:geo/static-map])\n                                                 :id :static-map}]}]\n       [tab-panel {:value @value \n                   :index 1 \n                   :children [gmap-outer]}]\n       [tab-panel {:value @value :index 2 :children \"WebGL Map to be created here\"#_[webgl-map-outer]}]]\n      \n      ])))\n\n(defn city-tile []\n  (let [{:keys [display_name lat lon]} @(subscribe [:geo/city-top-match])\n        err @(subscribe [:geo/map-error])]\n    (cond (some? err)\n          (throw (js/Error. \"API is busted\"))\n          (some? (or lat lon))\n          [:div {:id :city-info}\n           [:h1 display_name]\n           [map-tile]\n           [:h4 \"Latitude: \" lat]\n           [:h4 \"Longitude: \" lon]])))\n\n(defn movies-tile []\n  (let [movies @(subscribe [:movies/sorted])]\n    [:div {:id :movies}\n     [:h2 \"Movies about this city\"]\n     [:label {:for \"sort-by\"} \"Sort by: \"]\n     [:select {:name \"sort-by\"\n               :id :select-filter\n               :on-change (fn [e] (dispatch [:movies/sort-key (.. e -target -value)]))}\n      [:option {:value \"popularity\"} \"Popularity\"]\n      [:option {:value \"title\"} \"Title\"]\n      [:option {:value \"release_date\"} \"Release date\"]]\n     (into [:div {:id :movies-list}]\n           (for [{:keys [title release_date popularity]} movies]\n             [:div {:id :movie-each} [:h4 title]\n              [:h6 \"Release date: \" release_date]\n              [:p \"Rating: \" popularity]]))]))\n\n(defn weather-tile []\n  (let [weather @(subscribe [:geo/weather-data])]\n    [:div {:id :seven-day-forecast}\n     [:h2 \"Seven-day weather forecast\"]\n     (for [{:keys [min_temp max_temp weather datetime]} (:data weather)\n           :let [desc (:description weather)]]\n       [:div {:id :daily-forecast}\n        [:p {:id :date} datetime]\n        [:p \"Low: \" min_temp (str \"\\u00B0\" \"C\")]\n        [:p \"High \" max_temp (str \"\\u00B0\" \"C\")]\n        [:p desc]])]))\n\n(defn current-location []\n  [:div {:id :user-loc}\n   [:p#current-loc (str \"Your current location is: \" @(subscribe [:app/current-location]))]])\n\n(defn home []\n  [:div {:id :home-page}\n   [:div {:id :welcome-msg}\n    [:img {:src \"/icons8-globe-30.png\" :id :globe}]\n    [:p \"Welcome to City Explorer!\"]\n    [:p \"Here you can explore things to do in your favorite cities around the globe! Plan a trip in the search tab, or view maps, movies, or weather data.\"]]])\n\n(def city-router (router [\"/\"\n                          [\"\" {:name :home\n                               :view home\n                               :link-text \"Home\"\n                               :controllers [{:start (fn [& _] (dispatch [:app/highlight-active-link]))}]}]\n                          [\"search\" {:name :search\n                                     :view get-city-info\n                                     :link-text \"Search\"\n                                     :controllers [{:start (fn [& _] (dispatch [:app/highlight-active-link]))}]}]\n                          [\"maps\" {:name :maps\n                                   :view city-tile\n                                   :link-text \"Maps\"\n                                   :controllers [{:start (fn [& _] ())}]}]\n                          [\"movies\" {:name :movies\n                                     :view movies-tile\n                                     :link-text \"Movies\"\n                                     :controllers [{:start (fn [& _] (dispatch [:app/highlight-active-link]))}]}]\n                          [\"weather\" {:name :weather\n                                      :view weather-tile\n                                      :link-text \"Weather\"\n                                      :controllers [{:start (fn [& _] (dispatch [:app/highlight-active-link]))}]}]]))"]}