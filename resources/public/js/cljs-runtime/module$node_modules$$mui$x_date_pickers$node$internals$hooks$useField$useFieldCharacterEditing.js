shadow$provide.module$node_modules$$mui$x_date_pickers$node$internals$hooks$useField$useFieldCharacterEditing=function(global,require,module,exports){function _getRequireWildcardCache(nodeInterop$jscomp$0){if("function"!==typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop$jscomp$0)}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");
Object.defineProperty(exports,"__esModule",{value:!0});exports.useFieldCharacterEditing=void 0;var _extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),React=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==typeof obj&&"function"!==typeof obj)return{default:obj};if((nodeInterop=_getRequireWildcardCache(nodeInterop))&&nodeInterop.has(obj))return nodeInterop.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&
Object.getOwnPropertyDescriptor,key;for(key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj;nodeInterop&&nodeInterop.set(obj,newObj);return newObj}(require("module$node_modules$react$index")),_useEventCallback=global(require("module$node_modules$$mui$utils$useEventCallback")),_useUtils=require("module$node_modules$$mui$x_date_pickers$node$internals$hooks$useUtils"),
_useField=require("module$node_modules$$mui$x_date_pickers$node$internals$hooks$useField$useField_utils");exports.useFieldCharacterEditing=({sections,updateSectionValue,sectionsValueBoundaries,setTempAndroidValueStr})=>{const utils=(0,_useUtils.useUtils)(),[query,setQuery]=React.useState(null),resetQuery=(0,_useEventCallback.default)(()=>setQuery(null));React.useEffect(()=>{null!=query&&sections[query.sectionIndex]?.type!==query.sectionType&&resetQuery()},[sections,query,resetQuery]);React.useEffect(()=>
{if(null!=query){const timeout=setTimeout(()=>resetQuery(),5E3);return()=>{window.clearTimeout(timeout)}}return()=>{}},[query,resetQuery]);const applyQuery=({keyPressed,sectionIndex},getFirstSectionValueMatchingWithQuery,isValidQueryValue)=>{keyPressed=keyPressed.toLowerCase();const activeSection=sections[sectionIndex];if(null!=query&&(!isValidQueryValue||isValidQueryValue(query.value))&&query.sectionIndex===sectionIndex){isValidQueryValue=`${query.value}${keyPressed}`;const queryResponse=getFirstSectionValueMatchingWithQuery(isValidQueryValue,
activeSection);if(null==queryResponse.saveQuery)return setQuery({sectionIndex,value:isValidQueryValue,sectionType:activeSection.type}),queryResponse}getFirstSectionValueMatchingWithQuery=getFirstSectionValueMatchingWithQuery(keyPressed,activeSection);if(null!=getFirstSectionValueMatchingWithQuery.saveQuery&&!getFirstSectionValueMatchingWithQuery.saveQuery)return resetQuery(),null;setQuery({sectionIndex,value:keyPressed,sectionType:activeSection.type});return null!=getFirstSectionValueMatchingWithQuery.saveQuery?
null:getFirstSectionValueMatchingWithQuery},applyLetterEditing=params=>{const findMatchingOptions=(format,options,queryValue)=>{format=options.filter(option=>option.toLowerCase().startsWith(queryValue));return 0===format.length?{saveQuery:!1}:{sectionValue:format[0],shouldGoToNextSection:1===format.length}},testQueryOnFormatAndFallbackFormat=(queryValue,activeSection,fallbackFormat,formatFallbackValue)=>"letter"===activeSection.contentType?findMatchingOptions(activeSection.format,(0,_useField.getLetterEditingOptions)(utils,
activeSection.type,activeSection.format),queryValue):fallbackFormat&&null!=formatFallbackValue&&"letter"===(0,_useField.getDateSectionConfigFromFormatToken)(utils,fallbackFormat).contentType?(activeSection=(0,_useField.getLetterEditingOptions)(utils,activeSection.type,fallbackFormat),queryValue=findMatchingOptions(fallbackFormat,activeSection,queryValue),null!=queryValue.saveQuery?{saveQuery:!1}:(0,_extends2.default)({},queryValue,{sectionValue:formatFallbackValue(queryValue.sectionValue,activeSection)})):
{saveQuery:!1};return applyQuery(params,(queryValue,activeSection)=>{switch(activeSection.type){case "month":return testQueryOnFormatAndFallbackFormat(queryValue,activeSection,utils.formats.month,fallbackValue=>(0,_useField.changeSectionValueFormat)(utils,fallbackValue,utils.formats.month,activeSection.format));case "weekDay":return testQueryOnFormatAndFallbackFormat(queryValue,activeSection,utils.formats.weekday,(fallbackValue,fallbackOptions)=>fallbackOptions.indexOf(fallbackValue).toString());
case "meridiem":return testQueryOnFormatAndFallbackFormat(queryValue,activeSection);default:return{saveQuery:!1}}})},applyNumericEditing=params=>{const getNewSectionValue=(queryValue,sectionType,format,hasLeadingZeros,contentType)=>{const queryValueNumber=Number(`${queryValue}`);contentType=sectionsValueBoundaries[sectionType]({currentDate:null,format,contentType});if(queryValueNumber>contentType.maximum)return{saveQuery:!1};if(queryValueNumber<contentType.minimum)return{saveQuery:!0};queryValue=
Number(`${queryValue}0`)>contentType.maximum||queryValue.length===contentType.maximum.toString().length;return{sectionValue:(0,_useField.cleanDigitSectionValue)(utils,queryValueNumber,sectionType,format,hasLeadingZeros,contentType),shouldGoToNextSection:queryValue}};return applyQuery(params,(queryValue,activeSection)=>{if("digit"===activeSection.contentType)return getNewSectionValue(queryValue,activeSection.type,activeSection.format,activeSection.hasLeadingZeros,activeSection.contentType);if("month"===
activeSection.type){queryValue=getNewSectionValue(queryValue,activeSection.type,"MM",(0,_useField.doesSectionHaveLeadingZeros)(utils,"digit","month","MM"),"digit");if(null!=queryValue.saveQuery)return queryValue;activeSection=(0,_useField.changeSectionValueFormat)(utils,queryValue.sectionValue,"MM",activeSection.format);return(0,_extends2.default)({},queryValue,{sectionValue:activeSection})}if("weekDay"===activeSection.type){queryValue=getNewSectionValue(queryValue,activeSection.type,activeSection.format,
activeSection.hasLeadingZeros,activeSection.contentType);if(null!=queryValue.saveQuery)return queryValue;activeSection=(0,_useField.getDaysInWeekStr)(utils,activeSection.format)[Number(queryValue.sectionValue)-1];return(0,_extends2.default)({},queryValue,{sectionValue:activeSection})}return{saveQuery:!1}},queryValue=>!Number.isNaN(Number(queryValue)))};return{applyCharacterEditing:(0,_useEventCallback.default)(params=>{const activeSection=sections[params.sectionIndex];params=Number.isNaN(Number(params.keyPressed))?
applyLetterEditing(params):applyNumericEditing(params);null==params?setTempAndroidValueStr(null):updateSectionValue({activeSection,newSectionValue:params.sectionValue,shouldGoToNextSection:params.shouldGoToNextSection})}),resetCharacterQuery:resetQuery}}}
//# sourceMappingURL=module$node_modules$$mui$x_date_pickers$node$internals$hooks$useField$useFieldCharacterEditing.js.map
