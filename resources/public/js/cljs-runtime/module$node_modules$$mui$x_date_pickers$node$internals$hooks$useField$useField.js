shadow$provide.module$node_modules$$mui$x_date_pickers$node$internals$hooks$useField$useField=function(global,require,module,exports){function _getRequireWildcardCache(nodeInterop$jscomp$0){if("function"!==typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop$jscomp$0)}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");
Object.defineProperty(exports,"__esModule",{value:!0});exports.useField=void 0;var _extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),_objectWithoutPropertiesLoose2=global(require("module$node_modules$$babel$runtime$helpers$objectWithoutPropertiesLoose")),React=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==typeof obj&&"function"!==typeof obj)return{default:obj};if((nodeInterop=_getRequireWildcardCache(nodeInterop))&&
nodeInterop.has(obj))return nodeInterop.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor,key;for(key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj;nodeInterop&&nodeInterop.set(obj,newObj);return newObj}(require("module$node_modules$react$index")),
_useEnhancedEffect=global(require("module$node_modules$$mui$utils$useEnhancedEffect")),_useEventCallback=global(require("module$node_modules$$mui$utils$useEventCallback")),_useForkRef=global(require("module$node_modules$$mui$utils$useForkRef")),_styles=require("module$node_modules$$mui$material$node$styles$index"),_useValidation=require("module$node_modules$$mui$x_date_pickers$node$internals$hooks$validation$useValidation"),_useUtils=require("module$node_modules$$mui$x_date_pickers$node$internals$hooks$useUtils"),
_useField=require("module$node_modules$$mui$x_date_pickers$node$internals$hooks$useField$useField_utils"),_useFieldState=require("module$node_modules$$mui$x_date_pickers$node$internals$hooks$useField$useFieldState"),_useFieldCharacterEditing=require("module$node_modules$$mui$x_date_pickers$node$internals$hooks$useField$useFieldCharacterEditing"),_utils=require("module$node_modules$$mui$x_date_pickers$node$internals$utils$utils");const _excluded="onClick onKeyDown onFocus onBlur onMouseUp onPaste error".split(" ");
exports.useField=params=>{const utils=(0,_useUtils.useUtils)(),{state,selectedSectionIndexes,setSelectedSections,clearValue,clearActiveSection,updateSectionValue,updateValueFromValueStr,setTempAndroidValueStr,sectionsValueBoundaries,placeholder}=(0,_useFieldState.useFieldState)(params),{applyCharacterEditing,resetCharacterQuery}=(0,_useFieldCharacterEditing.useFieldCharacterEditing)({sections:state.sections,updateSectionValue,sectionsValueBoundaries,setTempAndroidValueStr}),{inputRef:inputRefProp,
internalProps,internalProps:{readOnly=!1,unstableFieldRef},forwardedProps:{onClick,onKeyDown,onFocus,onBlur,onMouseUp,onPaste,error},fieldValueManager,valueManager,validator}=params;params=(0,_objectWithoutPropertiesLoose2.default)(params.forwardedProps,_excluded);const inputRef=React.useRef(null),handleRef=(0,_useForkRef.default)(inputRefProp,inputRef),focusTimeoutRef=React.useRef(void 0),isRTL="rtl"===(0,_styles.useTheme)().direction,sectionOrder=React.useMemo(()=>(0,_useField.getSectionOrder)(state.sections,
isRTL),[state.sections,isRTL]),syncSelectionFromDOM=()=>{if(readOnly)setSelectedSections(null);else{var browserStartIndex=inputRef.current.selectionStart??0,nextSectionIndex=browserStartIndex<=state.sections[0].startInInput?1:state.sections.findIndex(section=>section.startInInput-section.startSeparator.length>browserStartIndex);setSelectedSections(-1===nextSectionIndex?state.sections.length-1:nextSectionIndex-1)}},handleInputClick=(0,_useEventCallback.default)((...args)=>{onClick?.(...args);syncSelectionFromDOM()}),
handleInputMouseUp=(0,_useEventCallback.default)(event=>{onMouseUp?.(event);event.preventDefault()}),handleInputFocus=(0,_useEventCallback.default)((...args)=>{onFocus?.(...args);const input=inputRef.current;clearTimeout(focusTimeoutRef.current);focusTimeoutRef.current=setTimeout(()=>{input&&input===inputRef.current&&(null!=selectedSectionIndexes||readOnly||(input.value.length&&Number(input.selectionEnd)-Number(input.selectionStart)===input.value.length?setSelectedSections("all"):syncSelectionFromDOM()))})}),
handleInputBlur=(0,_useEventCallback.default)((...args)=>{onBlur?.(...args);setSelectedSections(null)}),handleInputPaste=(0,_useEventCallback.default)(event=>{onPaste?.(event);if(readOnly)event.preventDefault();else{var pastedValue=event.clipboardData.getData("text");if(selectedSectionIndexes&&selectedSectionIndexes.startIndex===selectedSectionIndexes.endIndex){const activeSection=state.sections[selectedSectionIndexes.startIndex],lettersOnly=/^[a-zA-Z]+$/.test(pastedValue),digitsOnly=/^[0-9]+$/.test(pastedValue);
if("letter"===activeSection.contentType&&lettersOnly||"digit"===activeSection.contentType&&digitsOnly)return;if(lettersOnly||digitsOnly){event.preventDefault();return}}event.preventDefault();updateValueFromValueStr(pastedValue)}}),handleInputChange=(0,_useEventCallback.default)(event=>{if(!readOnly){event=event.target.value;var cleanValueStr=(0,_useField.cleanString)(event);if(null==selectedSectionIndexes)updateValueFromValueStr(cleanValueStr);else{if(0!==selectedSectionIndexes.startIndex||selectedSectionIndexes.endIndex!==
state.sections.length-1){var prevValueStr=(0,_useField.cleanString)(fieldValueManager.getValueStrFromSections(state.sections,isRTL));let startOfDiffIndex=-1,endOfDiffIndex=-1;for(var i=0;i<prevValueStr.length;i+=1)-1===startOfDiffIndex&&prevValueStr[i]!==cleanValueStr[i]&&(startOfDiffIndex=i),-1===endOfDiffIndex&&prevValueStr[prevValueStr.length-i-1]!==cleanValueStr[cleanValueStr.length-i-1]&&(endOfDiffIndex=i);i=state.sections[selectedSectionIndexes.startIndex];if(startOfDiffIndex<i.start||prevValueStr.length-
endOfDiffIndex-1>i.end)return;prevValueStr=cleanValueStr.length-prevValueStr.length+i.end-(0,_useField.cleanString)(i.endSeparator||"").length;cleanValueStr=cleanValueStr.slice(i.start,prevValueStr)}(0,_useField.isAndroid)()&&0===cleanValueStr.length?setTempAndroidValueStr(event):applyCharacterEditing({keyPressed:cleanValueStr,sectionIndex:selectedSectionIndexes.startIndex})}}}),handleInputKeyDown=(0,_useEventCallback.default)(event=>{onKeyDown?.(event);switch(!0){case "a"===event.key&&(event.ctrlKey||
event.metaKey):event.preventDefault();setSelectedSections("all");break;case "ArrowRight"===event.key:event.preventDefault();if(null==selectedSectionIndexes)setSelectedSections(sectionOrder.startIndex);else if(selectedSectionIndexes.startIndex!==selectedSectionIndexes.endIndex)setSelectedSections(selectedSectionIndexes.endIndex);else{var nextSectionIndex=sectionOrder.neighbors[selectedSectionIndexes.startIndex].rightIndex;null!==nextSectionIndex&&setSelectedSections(nextSectionIndex)}break;case "ArrowLeft"===
event.key:event.preventDefault();null==selectedSectionIndexes?setSelectedSections(sectionOrder.endIndex):selectedSectionIndexes.startIndex!==selectedSectionIndexes.endIndex?setSelectedSections(selectedSectionIndexes.startIndex):(nextSectionIndex=sectionOrder.neighbors[selectedSectionIndexes.startIndex].leftIndex,null!==nextSectionIndex&&setSelectedSections(nextSectionIndex));break;case ["Backspace","Delete"].includes(event.key):event.preventDefault();if(readOnly)break;null==selectedSectionIndexes||
0===selectedSectionIndexes.startIndex&&selectedSectionIndexes.endIndex===state.sections.length-1?clearValue():clearActiveSection();resetCharacterQuery();break;case "ArrowUp ArrowDown Home End PageUp PageDown".split(" ").includes(event.key):if(event.preventDefault(),!readOnly&&null!=selectedSectionIndexes){nextSectionIndex=state.sections[selectedSectionIndexes.startIndex];var activeDateManager=fieldValueManager.getActiveDateManager(utils,state,nextSectionIndex);event=(0,_useField.adjustSectionValue)(utils,
nextSectionIndex,event.key,sectionsValueBoundaries,activeDateManager.date);updateSectionValue({activeSection:nextSectionIndex,newSectionValue:event,shouldGoToNextSection:!1})}}});(0,_useEnhancedEffect.default)(()=>{if(null==selectedSectionIndexes)inputRef.current.scrollLeft&&(inputRef.current.scrollLeft=0);else{var firstSelectedSection=state.sections[selectedSectionIndexes.startIndex],lastSelectedSection=state.sections[selectedSectionIndexes.endIndex],selectionStart=firstSelectedSection.startInInput,
selectionEnd=lastSelectedSection.endInInput;selectedSectionIndexes.shouldSelectBoundarySelectors&&(selectionStart-=firstSelectedSection.startSeparator.length,selectionEnd+=lastSelectedSection.endSeparator.length);if(selectionStart!==inputRef.current.selectionStart||selectionEnd!==inputRef.current.selectionEnd)firstSelectedSection=inputRef.current.scrollTop,inputRef.current.setSelectionRange(selectionStart,selectionEnd),inputRef.current.scrollTop=firstSelectedSection}});const validationError=(0,_useValidation.useValidation)((0,_extends2.default)({},
internalProps,{value:state.value}),validator,valueManager.isSameError,valueManager.defaultErrorState),inputError=React.useMemo(()=>void 0!==error?error:valueManager.hasError(validationError),[valueManager,validationError,error]);React.useEffect(()=>{inputRef.current&&inputRef.current===document.activeElement&&setSelectedSections("all");return()=>window.clearTimeout(focusTimeoutRef.current)},[]);React.useEffect(()=>{null!=state.tempValueStrAndroid&&null!=selectedSectionIndexes&&(resetCharacterQuery(),
clearActiveSection())},[state.tempValueStrAndroid]);const valueStr=React.useMemo(()=>state.tempValueStrAndroid??fieldValueManager.getValueStrFromSections(state.sections,isRTL),[state.sections,fieldValueManager,state.tempValueStrAndroid,isRTL]),inputMode=React.useMemo(()=>null==selectedSectionIndexes||"letter"===state.sections[selectedSectionIndexes.startIndex].contentType?"text":"tel",[selectedSectionIndexes,state.sections]),shouldShowPlaceholder=!(inputRef.current&&inputRef.current===(0,_utils.getActiveElement)(document))&&
valueManager.areValuesEqual(utils,state.value,valueManager.emptyValue);React.useImperativeHandle(unstableFieldRef,()=>({getSections:()=>state.sections,getActiveSectionIndex:()=>{const browserStartIndex=inputRef.current.selectionStart??0;var browserEndIndex=inputRef.current.selectionEnd??0;if(0===browserStartIndex&&0===browserEndIndex)return null;browserEndIndex=browserStartIndex<=state.sections[0].startInInput?1:state.sections.findIndex(section=>section.startInInput-section.startSeparator.length>
browserStartIndex);return-1===browserEndIndex?state.sections.length-1:browserEndIndex-1},setSelectedSections:activeSectionIndex=>setSelectedSections(activeSectionIndex)}));return(0,_extends2.default)({placeholder,autoComplete:"off"},params,{value:shouldShowPlaceholder?"":valueStr,inputMode,readOnly,onClick:handleInputClick,onFocus:handleInputFocus,onBlur:handleInputBlur,onPaste:handleInputPaste,onChange:handleInputChange,onKeyDown:handleInputKeyDown,onMouseUp:handleInputMouseUp,error:inputError,ref:handleRef})}}
//# sourceMappingURL=module$node_modules$$mui$x_date_pickers$node$internals$hooks$useField$useField.js.map
